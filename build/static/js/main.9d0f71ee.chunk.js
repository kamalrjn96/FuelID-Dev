(this["webpackJsonpreact-material-dashboard"]=this["webpackJsonpreact-material-dashboard"]||[]).push([[0],{442:function(e,t,a){e.exports=a(607)},607:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(18),c=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(447);var o=a(57),i=a(650),u=a(59),s=a(381),m=Object(u.a)((function(){return Object(s.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),d=function(){return m(),null},p=a(101);p.Chart.helpers.extend(p.Chart.elements.Rectangle.prototype,{draw:function(){var e,t,a,r,n,l,c,o,i=this._chart.ctx,u=this._view,s=u.borderWidth,m=this._chart.config.options.cornerRadius;if(m<0&&(m=0),"undefined"===typeof m&&(m=0),u.horizontal?(e=u.base,t=u.x,a=u.y-u.height/2,r=u.y+u.height/2,n=t>e?1:-1,l=1,c=u.borderSkipped||"left"):(e=u.x-u.width/2,t=u.x+u.width/2,a=u.y,n=1,l=(r=u.base)>a?1:-1,c=u.borderSkipped||"bottom"),s){var d=Math.min(Math.abs(e-t),Math.abs(a-r)),p=(s=s>d?d:s)/2,f=e+("left"!==c?p*n:0),b=t+("right"!==c?-p*n:0),g=a+("top"!==c?p*l:0),E=r+("bottom"!==c?-p*l:0);f!==b&&(a=g,r=E),g!==E&&(e=f,t=b)}i.beginPath(),i.fillStyle=u.backgroundColor,i.strokeStyle=u.borderColor,i.lineWidth=s;var h=[[e,r],[e,a],[t,a],[t,r]],v=["bottom","left","top","right"].indexOf(c,0);function y(e){return h[(v+e)%4]}-1===v&&(v=0);var O=y(0);i.moveTo(O[0],O[1]);for(var j=1;j<4;j+=1){O=y(j);var x=j+1;4===x&&(x=0);var S=h[2][0]-h[1][0],C=h[0][1]-h[1][1],w=h[1][0],N=h[1][1];if((o=m)>Math.abs(C)/2&&(o=Math.floor(Math.abs(C)/2)),o>Math.abs(S)/2&&(o=Math.floor(Math.abs(S)/2)),C<0){var k=w,D=w+S,P=N+C,T=N+C,I=w,A=w+S,M=N,W=N;i.moveTo(I+o,M),i.lineTo(A-o,W),i.quadraticCurveTo(A,W,A,W-o),i.lineTo(D,T+o),i.quadraticCurveTo(D,T,D-o,T),i.lineTo(k+o,P),i.quadraticCurveTo(k,P,k,P+o),i.lineTo(I,M-o),i.quadraticCurveTo(I,M,I+o,M)}else if(S<0){var R=w+S,F=w,z=N,q=N,U=w+S,_=w,B=N+C,L=N+C;i.moveTo(U+o,B),i.lineTo(_-o,L),i.quadraticCurveTo(_,L,_,L-o),i.lineTo(F,q+o),i.quadraticCurveTo(F,q,F-o,q),i.lineTo(R+o,z),i.quadraticCurveTo(R,z,R,z+o),i.lineTo(U,B-o),i.quadraticCurveTo(U,B,U+o,B)}else i.moveTo(w+o,N),i.lineTo(w+S-o,N),i.quadraticCurveTo(w+S,N,w+S,N+o),i.lineTo(w+S,N+C-o),i.quadraticCurveTo(w+S,N+C,w+S-o,N+C),i.lineTo(w+o,N+C),i.quadraticCurveTo(w,N+C,w,N+C-o),i.lineTo(w,N+o),i.quadraticCurveTo(w,N,w+o,N)}i.fill(),s&&i.stroke()}});var f=a(113),b=a(10),g=Object(f.a)({palette:{background:{dark:"#F4F6F8",default:b.a.common.white,paper:b.a.common.white},primary:{main:b.a.indigo[500]},secondary:{main:b.a.indigo[500]},text:{primary:b.a.blueGrey[900],secondary:b.a.blueGrey[600]}},shadows:["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],typography:{h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}}}),E=a(5),h=a(385),v=a.n(h),y=(a(552),a(555),v.a.initializeApp({apiKey:"AIzaSyD7rZUoUAKJb-2XSwHfUAlyRuD8j5EGKhA",authDomain:"shakthi-ganapathi-fuel.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyD7rZUoUAKJb-2XSwHfUAlyRuD8j5EGKhA",REACT_APP_FIREBASE_APP_ID:"1:952600870062:web:c7ce5b757e018ed509c13f",REACT_APP_FIREBASE_AUTH_DOMAIN:"shakthi-ganapathi-fuel.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-RMTH2R51XS",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"952600870062",REACT_APP_FIREBASE_PROJECT_ID:"shakthi-ganapathi-fuel",REACT_APP_FIREBASE_STORAGE_BUCKET:"shakthi-ganapathi-fuel.appspot.com"}).REACT_APP_FIREBASE_DATABASE_URL,projectId:"shakthi-ganapathi-fuel",storageBucket:"shakthi-ganapathi-fuel.appspot.com",messagingSenderId:"952600870062",appId:"1:952600870062:web:c7ce5b757e018ed509c13f"})),O=y.auth(),j=y.firestore(),x=n.a.createContext();function S(){return Object(r.useContext)(x)}function C(e){var t=e.children,a=Object(r.useState)(),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)(!0),u=Object(E.a)(i,2),s=u[0],m=u[1];Object(r.useEffect)((function(){return O.onAuthStateChanged((function(e){o(e),m(!1)}))}),[]);var d={currentUser:c,login:function(e,t){return O.signInWithEmailAndPassword(e,t)},signup:function(e,t){return O.createUserWithEmailAndPassword(e,t)},logout:function(){return O.signOut()},resetPassword:function(e){return O.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return n.a.createElement(x.Provider,{value:d},!s&&t)}var w=a(651),N=a(652),k=a(61),D=a(36),P=a(67),T=a(2),I=a(648),A=a(649),M=a(680),W=a(688),R=function(e){return n.a.createElement(W.a,Object.assign({alt:"Logo",src:"/static/logo.jpg"},e))},F=Object(f.a)();F.typography.h2=Object(P.a)({fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"1.2rem"}},F.breakpoints.up("md"),{fontSize:"2rem"});var z=Object(u.a)({root:{},toolbar:{height:64}}),q=function(e){var t=e.className,a=Object(D.a)(e,["className"]),r=z();return n.a.createElement(I.a,Object.assign({className:Object(T.a)(r.root,t),elevation:0},a),n.a.createElement(A.a,{className:r.toolbar},n.a.createElement(R,null),n.a.createElement(M.a,{flexGrow:1}),n.a.createElement(i.a,{theme:F},n.a.createElement(k.a,{style:{color:"white"},variant:"h2"},"Shakti Ganapathi Fuel Station")),n.a.createElement(M.a,{flexGrow:1})))},U=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"},footer:{padding:e.spacing(1.5,1),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800],bottom:0,position:"sticky"}}})),_=function(e){var t=e.children,a=U();return n.a.createElement("div",{className:a.root},n.a.createElement(q,null),n.a.createElement("div",{className:a.wrapper},n.a.createElement("div",{className:a.contentContainer},n.a.createElement("div",{className:a.content},t,n.a.createElement("footer",{className:a.footer},n.a.createElement(w.a,null,n.a.createElement(N.a,{container:!0,justify:"center",className:a.pos},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{style:{color:"black"},variant:"caption"},"Phone : 9008761088 | Email : r6mesh@gmail.com | Toll Free No : 1800 2333 555")))))))))},B=a(20),L=a.n(B),V=a(35),Q=(a(379),a(380),a(430)),G=a(138),Y=a(681),H=function(){var e=S().currentUser,t=Object(r.useState)(!0),a=Object(E.a)(t,2),l=a[0],c=a[1],o=Object(r.useState)(),i=Object(E.a)(o,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){try{j.collection("users").doc(e.uid).get().then((function(e){e&&(s(e.data()),console.log(e.data()),console.log(u),c(!1))}))}catch(t){console.log(t),console.log("Failed to get user data")}}),[e]),l&&n.a.createElement("div",null,"Loading...")},J=a(653),X=a(137),K=a(657),$=a(656),Z=a(655),ee=a(389),te=Object(r.forwardRef)((function(e,t){var a=e.children,r=e.title,l=void 0===r?"":r,c=Object(D.a)(e,["children","title"]);return n.a.createElement("div",Object.assign({ref:t},c),n.a.createElement(ee.a,null,n.a.createElement("title",null,l)),a)})),ae=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},scrollPaper:{alignItems:"baseline"}}})),re=function(){var e=ae(),t=Object(r.useRef)(""),a=Object(r.useRef)(""),l=S(),c=l.login,i=l.resetPassword,u=l.currentUser,s=Object(r.useState)(""),m=Object(E.a)(s,2),d=m[0],p=m[1],f=Object(r.useState)(!1),b=Object(E.a)(f,2),g=b[0],h=b[1],v=Object(r.useState)(!1),y=Object(E.a)(v,2),O=y[0],j=y[1],x=Object(r.useState)(!1),C=Object(E.a)(x,2),D=C[0],P=C[1],T=Object(r.useState)(!1),I=Object(E.a)(T,2),A=I[0],W=I[1],R=Object(r.useState)(!1),F=Object(E.a)(R,2),z=F[0],q=F[1],U=function(){return n.a.createElement(H,null)};function _(){return(_=Object(V.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,p(""),h(!0),e.next=6,c(O,A);case 6:U(),Object(o.navigate)("/app/dashboard",!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p("Failed to log in");case 13:h(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function B(){return(B=Object(V.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(D).then((function(){window.alert("Email has been sent to ".concat(D))})).catch((function(e){console.log(e.code,e.message),window.alert("".concat(e.message," Enter Valid e-mail ID"))}));case 2:P(),ee();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(){q(!1)};function re(e){e.target.style.cursor="pointer"}return n.a.createElement(n.a.Fragment,null,u?Object(o.navigate)("/app/dashboard",!0):n.a.createElement(te,{className:e.root,title:"Login"},n.a.createElement(M.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(w.a,{maxWidth:"sm"},n.a.createElement(J.a,{open:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:ee,className:e.scrollPaper},n.a.createElement(Z.a,null,"Enter Email ID to reset Password"),n.a.createElement($.a,null,n.a.createElement("form",{className:e.container},n.a.createElement(X.a,{className:e.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Email ID",margin:"normal",name:"resetEmailID",variant:"outlined",required:!0,onChange:function(e){return P(e.target.value)}}),n.a.createElement(K.a,null,n.a.createElement(G.a,{onMouseOver:function(e){return re(e)},onClick:function(e){return ee()},color:"primary"},"Cancel"),n.a.createElement(G.a,{onMouseOver:function(e){return re(e)},onClick:function(){return B.apply(this,arguments)},color:"primary"},"Ok")))))),n.a.createElement(M.a,{mb:3},n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},"Sign in")),d&&n.a.createElement(Y.a,{severity:"error"},d),n.a.createElement("form",{className:"form",noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"Email Address",margin:"normal",name:"email",type:"email",required:!0,variant:"outlined",innerRef:t,onChange:function(e){return j(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Password",margin:"normal",name:"password",type:"password",variant:"outlined",innerRef:a,onChange:function(e){return W(e.target.value)},required:!0}),n.a.createElement(M.a,{my:2},n.a.createElement(G.a,{color:"primary",disabled:g,fullWidth:!0,size:"large",type:"submit",variant:"contained",onClick:function(e){return _.apply(this,arguments)}},"Sign in now"),n.a.createElement(N.a,{container:!0},n.a.createElement(N.a,{item:!0,xs:!0},n.a.createElement(G.a,{onClick:function(){q(!0)}},"Forgot password?")),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",variant:"body1"},"Don't have an account?"," ",n.a.createElement(o.A,{href:"/register",variant:"body2"},"Sign up"))))))))))},ne=a(17),le=a(92),ce=a(34),oe=a.n(ce),ie=(a(560),a(419)),ue=a.n(ie),se=a(420),me=a.n(se),de=a(205),pe=a.n(de),fe=a(275),be=a.n(fe),ge=a(417),Ee=a.n(ge),he=a(274),ve=a.n(he),ye=a(682),Oe=a(668),je=a(659),xe=a(660),Se=a(24),Ce=(a(578),a(215)),we=a(108),Ne=a(683),ke=a(658),De=a(112),Pe=a.n(De),Te=a(615),Ie=Object(u.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function Ae(e){var t,a=Ie(),l=Object(r.useState)(e.minQuantity),c=Object(E.a)(l,2),o=c[0],i=c[1],u=Object(r.useState)(1),s=Object(E.a)(u,2),m=s[0],d=(s[1],Object(r.useState)("")),p=Object(E.a)(d,2),f=p[0],b=p[1],g=Object(r.useState)(),h=Object(E.a)(g,2),v=h[0],y=h[1],O=Object(r.useState)(),x=Object(E.a)(O,2),C=x[0],w=x[1],D=Object(r.useState)(new Date("2014-08-18T21:11:54")),P=Object(E.a)(D,2),T=(P[0],P[1],Object(r.useState)([])),I=Object(E.a)(T,2),A=I[0],W=I[1],R=S().currentUser;R&&(t=j.collection("users").doc(R.uid));var F=Object(r.useState)(e.userData),z=Object(E.a)(F,2),q=z[0],U=z[1],_=Object(r.useState)(q&&q.address?q.address:""),B=Object(E.a)(_,2),L=B[0],V=B[1],H=Object(r.useState)(q&&q.address?q.address[0].value:""),ee=Object(E.a)(H,2),te=ee[0],ae=ee[1],re=Math.floor(1e3+9e3*Math.random()),le=Object(r.useState)(!1),ce=Object(E.a)(le,2),oe=ce[0],ie=ce[1],ue=function(){ie(!1)};return n.a.createElement("div",null,n.a.createElement($.a,null,n.a.createElement(N.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",width:"100%"},n.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(N.a,{item:!0},n.a.createElement(M.a,{display:"flex",flexDirection:"row",justifyContent:"flex-start"},n.a.createElement(M.a,{flexDirection:"column"},n.a.createElement(k.a,{color:"textSecondary",variant:"h6"}),n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},R&&R.displayName),n.a.createElement(k.a,{color:"primary",variant:"h6"},q&&q.mobileNumber))))),n.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"primary",variant:"caption"},""),n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},te))),n.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(N.a,{item:!0},n.a.createElement(X.a,{className:a.formControl,width:1},q&&q.address&&n.a.createElement(Ce.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:function(e){ae(e.target.value)},placeholder:te},L.map((function(e){return n.a.createElement(we.a,{key:e.tag,value:e.value},e.tag)}))),n.a.createElement(Te.a,null,"Select Address"))),n.a.createElement(N.a,{item:!0}),n.a.createElement(N.a,{item:!0},n.a.createElement(M.a,{display:"flex",flexDirection:"row-reverse"},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(ke.a,{size:"small",color:"secondary","aria-label":"add",onClick:function(){ie(!0)}},n.a.createElement(Pe.a,null)),n.a.createElement(Te.a,null,"Add new address"))))),n.a.createElement(N.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(N.a,{item:!0},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Q.a,{autoFocus:!0,id:"quantitySelect",label:"Qty",onChange:function(t){return a=t.target.value,console.log(a,e.minQuantity,Number(a)<Number(e.minQuantity)),i(a),Number(a)<Number(e.minQuantity)&&W(["Minimum order quantity is ".concat(e.minQuantity," litres")]),void(Number(a)>=Number(e.minQuantity)&&(Number(a)*e.price>1e4&&W(["Credit Limit Exceeded"]),Number(a)*e.price<=1e4&&W([])));var a},type:"number",min:e.minQuantity,defaultValue:e.minQuantity}),n.a.createElement(Te.a,null,"Choose Quantity"))),n.a.createElement(N.a,{item:!0},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Q.a,{autoFocus:!0,id:"price",label:"Price",type:"text",value:o*e.price,InputProps:{readOnly:!0}}),n.a.createElement(Te.a,null,"Calculated Price"))))),n.a.createElement(Q.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"remarks",label:"Remarks",type:"text",onChange:function(e){return b(e.target.value)},placeholder:"Place order for a later date | Provide delivery instructions"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},"*Actual Price will depend on the actual quantity of the fuel Delivered."),n.a.createElement("br",null),n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},"**Fuel price is dependant on the day's pricing"),n.a.createElement("div",null,n.a.createElement(J.a,{disableBackdropClick:!0,open:oe,onClose:ue},n.a.createElement(Z.a,null,"Add New Address"),n.a.createElement($.a,null,n.a.createElement("form",{className:a.container},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"New Tag",margin:"normal",name:"addressTag",variant:"outlined",required:!0,onChange:function(e){return y(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"New Address",margin:"normal",name:"address",variant:"outlined",required:!0,onChange:function(e){return w(e.target.value)}})))),n.a.createElement(K.a,null,n.a.createElement(G.a,{onClick:ue,color:"primary"},"Cancel"),n.a.createElement(G.a,{onClick:function(e){var a;e.preventDefault(),a=q.address?[].concat(Object(Se.a)(q.address),[{id:Object(Ne.a)(),tag:v,value:C}]):[{id:Object(Ne.a)(),tag:v,value:C}],V(a),ae(a[a.length-1].value);var r=Object(ne.a)(Object(ne.a)({},q),{},{address:a});U(r),t.set(r).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)})),console.log(r),ie(!1)},color:"primary"},"Ok"))))),A&&A.length>0&&n.a.createElement(Y.a,{severity:"error"},A),n.a.createElement(K.a,null,n.a.createElement(G.a,{onClick:function(){j.collection("orders").doc("SG-".concat(re)).set({userID:R.uid,orderID:"SG-".concat(re),quantity:o,price:o*e.price,paymentType:m,orderStatus:1,remarks:f,customerName:R.displayName,mobileNumber:q.mobileNumber,created:Date.now(),addressValue:te,OTP:Math.floor(1e3+9e3*Math.random())}).then((function(){console.log("Document successfully written!"),e.closeOrder()})).catch((function(e){console.error("Error writing document: ",e)}))},color:"primary",disabled:0!==A.length},"Place Order"),n.a.createElement(G.a,{onClick:e.closeOrder,color:"primary"},"Close")))}var Me=Object(u.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),We=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Re=function(e){var t=Me(),a=S().currentUser,l=(new Date).toISOString().slice(0,10).split("-")[2],c=Object(r.useState)(e.userData),o=Object(E.a)(c,2),i=o[0],u=o[1];Object(r.useEffect)((function(){try{j.collection("users").doc(a.uid).get().then((function(e){e&&u(e.data())}))}catch(e){console.log(e),console.log("Failed to get user data")}}),[]);var s=Object(r.useState)(!1),m=Object(E.a)(s,2),d=m[0],p=m[1],f=Object(r.useState)(!1),b=Object(E.a)(f,2),g=b[0],h=b[1],v=Object(r.useState)(e.price),y=Object(E.a)(v,2),O=y[0],x=y[1],C=function(){p(!1)},w=function(){h(!1)};return n.a.createElement(je.a,{className:Object(T.a)(t.root)},i&&i.isCustomer&&n.a.createElement("div",null,n.a.createElement(xe.a,null,n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:3},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"Today's Price"),n.a.createElement(k.a,{color:"textPrimary",variant:"h3"},e.price)),n.a.createElement(M.a,{mt:4,display:"flex",alignItems:"center",justifyContent:"center",paddingRight:2},n.a.createElement(G.a,{color:"primary",fullWidth:!0,size:"small",type:"submit",variant:"contained",onClick:function(){p(!0)}},"Order Now"))),n.a.createElement(M.a,{mt:2,display:"flex",alignItems:"center"},n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},n.a.createElement("i",{className:"fas fa-rupee-sign"})," / Litre"))),n.a.createElement("div",null,d&&n.a.createElement(J.a,{open:d,onClose:C,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"sm"},n.a.createElement(Ae,{price:e.price,userData:e.userData,minQuantity:e.minQuantity,closeOrder:C})))),i&&i.isOwner&&n.a.createElement("div",null,n.a.createElement(xe.a,null,console.log(e),n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:3},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"Selling price today"),n.a.createElement(k.a,{color:"textPrimary",variant:"h3"},e.price,"  ",n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},n.a.createElement("i",{className:"fas fa-rupee-sign"})," / Litre")),n.a.createElement(k.a,{variant:"caption",style:new Date(e.lastUpdated).toISOString().slice(0,10).split("-")[2]!==l?{color:"red"}:{color:"black"}},"Last Updated :"," ",new Date(e.lastUpdated).toISOString().slice(0,10).split("-")[2]," ",We[new Date(e.lastUpdated).getMonth()])),n.a.createElement(M.a,{display:"flex",alignItems:"center",justifyContent:"center",paddingRight:2},n.a.createElement(G.a,{color:"primary",fullWidth:!0,size:"small",type:"submit",variant:"contained",onClick:function(){h(!0)}},"Set Price")))),n.a.createElement("div",null,g&&n.a.createElement("div",null,n.a.createElement(J.a,{open:g,onClose:C,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"sm"},n.a.createElement(Z.a,null,"Set Price"),n.a.createElement($.a,null,n.a.createElement("form",{className:t.container},n.a.createElement(X.a,{className:t.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Price",margin:"normal",name:"price",variant:"outlined",required:!0,defaultValue:e.price,onChange:function(e){return x(e.target.value)}})))),n.a.createElement(K.a,null,n.a.createElement(G.a,{onClick:w,color:"primary"},"Cancel"),n.a.createElement(G.a,{onClick:function(e){e.preventDefault();try{j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X").update({price:parseInt(O),lastUpdated:Date.now()}).then((function(){console.log("Document successfully written!")}))}catch(t){console.log(t),console.log("Failed to get user data")}w()},color:"primary"},"Ok")))))))},Fe=(a(378),a(687)),ze=a(393),qe=a(203),Ue=a.n(qe),_e=a(201),Be=Object(u.a)((function(){return{root:{},actions:{justifyContent:"flex-end"}}})),Le=function(e){var t=Be(),a=Object(r.useState)([]),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)({}),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(null),p=Object(E.a)(d,2),f=p[0],b=p[1],g=function(){b(null)};Object(r.useEffect)((function(){var t=[];t.push.apply(t,Object(Se.a)(e.orders.map((function(e){return e.id=e.orderID,e.quantity=1!==e.orderStatus?e.deliveredQuantity:e.quantity,e.completed=e.delivered?e.delivered:e.cancelled,e})))),o(t)}),[]);var h=[{field:"orderID",headerName:"Order Ref",width:120},{field:"customerName",headerName:"Customer name",width:160},{field:"addressValue",headerName:"Location",width:180},{field:"created",headerName:"Date Ordered",type:"date",width:160,renderCell:function(e){return oe()(e.value).format("DD/MM/YYYY HH:mm")}},{field:"completed",headerName:"Date Completed",type:"date",width:160,renderCell:function(e){return e.value?oe()(e.value).format("DD/MM/YYYY HH:mm"):""}},{field:"paymentType",headerName:"Payment Method",renderCell:function(e){return 1===e.value?"Cash":"Credit"},width:180},{field:"quantity",headerName:"Quantity(Ltrs)",width:150},{field:"price",headerName:"Amount(Rs)",width:140},{field:"orderStatus",headerName:"Status",width:100,renderCell:function(e){return n.a.createElement(Fe.a,{style:1===e.value?{backgroundColor:"orange",color:"white"}:2===e.value?{backgroundColor:"green",color:"white"}:{backgroundColor:"red",color:"white"},label:1===e.value?"Pending":2===e.value?"Fulfilled":"Cancelled",size:"small"})}},{field:"actions",headerName:"Actions",sortable:!1,width:120,renderCell:function(e){return n.a.createElement(Ue.a,{color:"primary",size:"small",onMouseOver:function(e){return function(e){e.target.style.cursor="pointer"}(e)},onClick:function(t){return function(e,t){b(e.currentTarget),m(t.row)}(t,e)}})}}];return n.a.createElement(je.a,{className:Object(T.a)(t.root)},c&&0!==c.length&&n.a.createElement(w.a,{style:{height:400,width:"100%"}},n.a.createElement(_e.a,{rows:c,columns:h,pageSize:10}),n.a.createElement(ze.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:g},n.a.createElement(we.a,{onClick:g},"View Order details"),2===s.orderStatus&&n.a.createElement(we.a,{onClick:function(){return console.log(s)}},"View Invoice"),2===s.orderStatus&&n.a.createElement(we.a,{onClick:g},"Download Invoice"))))},Ve=Object(u.a)((function(){return{root:{},actions:{justifyContent:"flex-end"}}})),Qe=function(e){var t=Ve(),a=Object(r.useState)([]),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)({}),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(null),p=Object(E.a)(d,2),f=p[0],b=p[1];Object(r.useEffect)((function(){console.log(e.users);var t=[];t.push.apply(t,Object(Se.a)(e.users.map((function(e){return e})))),o(t)}),[]);var g=[{field:"customerName",headerName:"Name",width:130},{field:"mobileNumber",headerName:"Phone/Email",width:170,renderCell:function(e){return n.a.createElement(N.a,{container:!0,direction:"column",justify:"center",alignItems:"flex-start"},n.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0,variant:"body2"},e.row.mobileNumber),n.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0,variant:"body2"},e.row.email))}},{field:"addressValue",headerName:"Address",width:180,renderCell:function(e){return e.row.address&&e.row.address[0].value}},{field:"creditLimit",headerName:"Credit Limit",width:180},{field:"totalOrders",headerName:"Total Orders",width:180,renderCell:function(t){return e.orders.filter((function(e){return e.userID===t.row.id})).length}},{field:"orderValue",headerName:"Order Value",width:180,renderCell:function(t){return e.orders.filter((function(e){return e.userID===t.row.id})).map((function(e){return Number(e.price)})).reduce((function(e,t){return e+t}),0).toLocaleString()}},{field:"created",headerName:"Customer Since",width:180},{field:"actions",headerName:"Action",sortable:!1,width:120,renderCell:function(e){return n.a.createElement(Ue.a,{color:"primary",size:"small",onMouseOver:function(e){return function(e){e.target.style.cursor="pointer"}(e)},onClick:function(t){return function(e,t){b(e.currentTarget),m(t.row)}(t,e)}})}}];return n.a.createElement(je.a,{className:Object(T.a)(t.root)},c&&0!==c.length&&n.a.createElement("div",{style:{height:400,width:"100%"}},n.a.createElement(_e.a,{rows:c,columns:g,pageSize:10}),n.a.createElement(ze.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:function(){b(null)}},n.a.createElement(we.a,{onClick:function(){return console.log(s)}},"Edit User details"))))},Ge=a(661),Ye=a(662),He=a(614),Je=a(616),Xe=(a(663),a(664),a(107)),Ke=(a(413),a(204),Object(Ne.a)(),oe()().subtract(2,"hours"),Object(Ne.a)(),oe()().subtract(2,"hours"),Object(Ne.a)(),oe()().subtract(3,"hours"),Object(Ne.a)(),oe()().subtract(5,"hours"),Object(Ne.a)(),oe()().subtract(9,"hours"),Object(u.a)({root:{height:"100%"},image:{height:48,width:48}}),a(19)),$e=(a(414),Object(u.a)((function(){return{root:{}}})),a(665),a(415),Object(u.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:b.a.orange[600],height:56,width:56}}})),a(666)),Ze=Object(u.a)((function(e){return{root:{height:"100%",minWidth:275},avatar:{backgroundColor:b.a.green[600],height:56,width:56},differenceIcon:{color:b.a.green[900]},differenceValue:{color:b.a.green[900],marginRight:e.spacing(1)},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},formControl:{margin:e.spacing(1),minWidth:120}}})),et=function(e){var t=Ze(),a=Object(r.useState)(1),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)(0),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(0),p=Object(E.a)(d,2),f=p[0],b=p[1],g=Object(r.useState)(0),h=Object(E.a)(g,2),v=(h[0],h[1],Object(r.useState)()),y=Object(E.a)(v,2),O=y[0],x=y[1],C=Object(r.useState)(!1),w=Object(E.a)(C,2),D=w[0],P=w[1],I=Object(r.useState)(!1),A=Object(E.a)(I,2),M=A[0],W=A[1],R=Object(r.useState)(!1),F=Object(E.a)(R,2),z=F[0],q=F[1],U=Object(r.useState)(""),_=Object(E.a)(U,2),B=_[0],L=_[1];S().currentUser;Object(r.useEffect)((function(){setTimeout((function(){P(!1)}),2e3)}),[D]),Object(r.useEffect)((function(){setTimeout((function(){W(!1)}),2e3)}),[M]);var V=function(){q(!0)},H=function(){q(!1)};function ee(e){e.target.style.cursor="pointer"}function te(t,a,r){t.preventDefault(),j.collection("orders").doc(a).update({orderStatus:3,cancelled:Date.now(),cancelledBy:r,cancelRemark:B}).then((function(){e.openNotification(),console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)})),H()}return n.a.createElement(je.a,{className:Object(T.a)(t.root)},e.userdata&&e.userdata.isCustomer&&n.a.createElement("div",null,n.a.createElement(J.a,{open:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:H},n.a.createElement(Z.a,null,"Add Remarks"),n.a.createElement($.a,null,n.a.createElement("form",{className:t.container,onSubmit:function(t){return te(t,e.order.orderID,"Customer")}},n.a.createElement(X.a,{className:t.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Remarks",margin:"normal",name:"cancelRemarks",variant:"outlined",required:!0,onChange:function(e){return L(e.target.value)}}),n.a.createElement(K.a,null,n.a.createElement(G.a,{onMouseOver:function(e){return ee(e)},onClick:function(e){return H()},color:"primary"},"Cancel"),n.a.createElement(G.a,{onMouseOver:function(e){return ee(e)},onClick:function(t){return te(t,e.order.orderID,"Customer")},color:"primary",type:"submit"},"Ok")))))),n.a.createElement(xe.a,null,n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:1},n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:6},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",variant:"h3"},"Current Order"),n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},e.order.orderID)),n.a.createElement(N.a,{item:!0},n.a.createElement(Fe.a,{color:"secondary",onMouseOver:function(e){return ee(e)},label:"Cancel",onClick:function(e){return V()},size:"small"}))),n.a.createElement(N.a,{item:!0},n.a.createElement(N.a,{container:!0,justify:"center",spacing:4},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},e.order.quantity," ",n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},"Liters"))),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},n.a.createElement("i",{variant:"caption",className:"fas fa-rupee-sign"})," ",e.order.price)),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},1===e.order.paymentType?"Cash":"Credit")))),n.a.createElement(N.a,{item:!0},n.a.createElement(N.a,{container:!0,justify:"center",spacing:8},n.a.createElement(N.a,{item:!0},n.a.createElement(Fe.a,{color:"secondary",label:"In-Progress",size:"small"})),n.a.createElement(N.a,{item:!0,alignItems:"center"},n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},"OTP : ".concat(e.order.OTP)))))))),e.userdata&&e.userdata.isDriver&&n.a.createElement("div",null,n.a.createElement(J.a,{open:z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:H},n.a.createElement(Z.a,null,"Add Remarks"),n.a.createElement($.a,null,n.a.createElement("form",{className:t.container,onSubmit:function(t){return te(t,e.order.orderID,"Driver")}},n.a.createElement(X.a,{className:t.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Remarks",margin:"normal",name:"cancelRemarks",variant:"outlined",required:!0,onChange:function(e){return L(e.target.value)}}),n.a.createElement(K.a,null,n.a.createElement(G.a,{onMouseOver:function(e){return ee(e)},onClick:function(e){return H()},color:"primary"},"Cancel"),n.a.createElement(G.a,{onMouseOver:function(e){return ee(e)},onClick:function(t){return te(t,e.order.orderID,"Driver")},color:"primary",type:"submit"},"Ok")))))),n.a.createElement(J.a,{open:D,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},n.a.createElement(Y.a,{severity:"success"},n.a.createElement($e.a,null,"Success"),n.a.createElement("strong",null,"Order Completed!!"))),n.a.createElement(J.a,{open:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},n.a.createElement(Y.a,{severity:"error"},n.a.createElement($e.a,null,"Failed"),n.a.createElement("strong",null,"Incorrect OTP!!"))),n.a.createElement(xe.a,null,n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:6},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{className:t.title,color:"textSecondary",gutterBottom:!0},e.order.orderID)),n.a.createElement(N.a,{item:!0},n.a.createElement(Fe.a,{color:"secondary",label:"In-Progress",size:"small"})),n.a.createElement(N.a,{item:!0},n.a.createElement(Fe.a,{style:{backgroundColor:"gray",color:"white"},onMouseOver:function(e){return ee(e)},label:"Cancel",onClick:function(e){return V()},size:"small"}))),n.a.createElement(k.a,{variant:"h5",component:"h2"},e.order.customerName),n.a.createElement(k.a,{className:t.pos,color:"textSecondary"},e.order.mobileNumber),n.a.createElement(k.a,{variant:"body2",className:t.pos,component:"p"},e.order.addressValue),n.a.createElement(N.a,{container:!0,justify:"space-between",className:t.pos},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},e.order.quantity," ",n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},"Liters"))),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},n.a.createElement("i",{variant:"caption",className:"fas fa-rupee-sign"})," ",e.order.price)),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},1===e.order.paymentType?"Cash":"Credit"))),1===c&&n.a.createElement(N.a,{container:!0,justify:"space-between"},n.a.createElement(N.a,{item:!0},n.a.createElement(G.a,{color:"primary",size:"small",onClick:function(){return o(2)},variant:"contained"},"Enter OTP"))),2===c&&n.a.createElement(N.a,{container:"true",direction:"row",justify:"space-between",spacing:1},n.a.createElement(N.a,{item:!0},n.a.createElement(Q.a,{name:"otp",label:"OTP",variant:"outlined",size:"small",onChange:function(e){return x(e.target.value)},style:{width:"50%"}})),n.a.createElement(N.a,{item:!0},n.a.createElement(G.a,{color:"primary",size:"small",onClick:function(){var t;(t=e.order.OTP)&&O==t?(o(3),x()):(W(!0),o(1),x(),console.log("OTP verification failed"))},variant:"contained"},"Verify OTP"))),3===c&&n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:2},n.a.createElement(N.a,{item:!0},n.a.createElement(Q.a,{name:"actualQuantity",label:"Quantity",variant:"outlined",size:"small",onChange:function(e){return m(e.target.value)}})),n.a.createElement(N.a,{item:!0},n.a.createElement(Q.a,{name:"deliveryCharge",label:"DeliveryCharge",variant:"outlined",size:"small",onChange:function(e){return b(e.target.value)},notched:"true"})),n.a.createElement(N.a,{item:!0},n.a.createElement(G.a,{color:"primary",size:"small",onClick:function(){return function(t,a,r){var n;t&&a&&(n=Number(t)*Number(e.price)+Number(a)),j.collection("orders").doc(r).update({orderStatus:2,delivered:Date.now(),price:Number(n),deliveredQuantity:Number(t),deliveryCharge:Number(a)}).then((function(){P(!0),console.log("Document successfully written!"),o(1),x()})).catch((function(e){W(!0),console.error("Error writing document: ",e),o(1),x()}))}(s,f,e.order.orderID)},variant:"contained"},"Complete Order"))),n.a.createElement("br",null),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},e.order.remarks)))),e.userdata&&e.userdata.isOwner&&n.a.createElement("div",null,n.a.createElement(xe.a,null,n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:6},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{className:t.title,color:"textSecondary",gutterBottom:!0},e.order.orderID)),n.a.createElement(N.a,{item:!0},n.a.createElement(Fe.a,{color:"secondary",label:"In-Progress",size:"small"}))),n.a.createElement(k.a,{variant:"h5",component:"h2"},e.order.customerName),n.a.createElement(k.a,{className:t.pos,color:"textSecondary"},e.order.mobileNumber),n.a.createElement(k.a,{variant:"body2",className:t.pos,component:"p"},e.order.addressValue),n.a.createElement(N.a,{container:!0,justify:"space-between",className:t.pos},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},e.order.quantity," ",n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},"Liters"))),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},n.a.createElement("i",{variant:"caption",className:"fas fa-rupee-sign"})," ",e.order.price)),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"h4"},1===e.order.paymentType?"Cash":"Credit"))),n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",variant:"caption"},e.order.remarks)))))},tt=Object(u.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:b.a.indigo[600],height:56,width:56}}})),at=function(e){var t=e.className,a=e.title,r=e.value,l=e.icon,c=Object(D.a)(e,["className","title","value","icon"]),o=tt();return n.a.createElement(je.a,Object.assign({className:Object(T.a)(o.root,t)},c),n.a.createElement(xe.a,null,n.a.createElement(N.a,{container:!0,justify:"space-between",spacing:3},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},a),n.a.createElement(k.a,{color:"textPrimary",variant:"h3"},r)),n.a.createElement(N.a,{item:!0},n.a.createElement(W.a,{className:o.avatar},l)))))},rt=a(262),nt=a.n(rt),lt=a(416),ct=a.n(lt),ot=Object(u.a)((function(){return{root:{height:"100%"},gridRoot:{flexGrow:"1"}}})),it=function(e){var t=ot(),a=Object(Ke.a)(),r=Math.trunc(Number(e.cash)/Number(e.total)*100),l=Math.trunc(Number(e.credit)/Number(e.total)*100),c={datasets:[{data:[r,l],backgroundColor:[b.a.green[500],b.a.orange[600]],borderWidth:8,borderColor:b.a.common.white,hoverBorderColor:b.a.common.white}],labels:["Cash","Credit"]},o={animation:!1,cutoutPercentage:80,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,tooltips:{backgroundColor:a.palette.background.default,bodyFontColor:a.palette.text.secondary,borderColor:a.palette.divider,borderWidth:1,enabled:!0,footerFontColor:a.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:a.palette.text.primary}},i=[{title:"Cash",value:r,icon:nt.a,color:b.a.green[500]},{title:"Credit",value:l,icon:ct.a,color:b.a.orange[600]}];return n.a.createElement(je.a,{className:Object(T.a)(t.root)},n.a.createElement(Ge.a,{title:"Monthly Earning"}),n.a.createElement(xe.a,null,n.a.createElement(N.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{color:"textPrimary",variant:"body1"},"This Month"),n.a.createElement(k.a,{color:"textPrimary",variant:"body1"},n.a.createElement("strong",null,e.total.toLocaleString()))),n.a.createElement(N.a,{item:!0},n.a.createElement(M.a,{position:"relative"},n.a.createElement(p.Doughnut,{data:c,options:o})),n.a.createElement(M.a,{display:"flex",justifyContent:"center",mt:2},i.map((function(e){var t=e.color,a=e.icon,r=e.title,l=e.value;return n.a.createElement(M.a,{key:r,p:1,textAlign:"center"},n.a.createElement(a,{color:"action"}),n.a.createElement(k.a,{color:"textPrimary",variant:"body1"},r),n.a.createElement(k.a,{style:{color:t},variant:"h2"},l,"%"))})))))),n.a.createElement(M.a,{display:"flex",ml:2},n.a.createElement(k.a,{color:"primary",variant:"caption"},"Total value of Earnings for the month of ",e.month," 2020 in Rupees")))},ut=a(669),st=a(418),mt=a.n(st),dt=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(.5)},tab:{backgroundColor:e.palette.background.paper,width:"100%"}}})),pt=function(){var e,t,a,l,c,o=dt(),i=Object(r.useState)(!0),u=Object(E.a)(i,2),s=u[0],m=(u[1],Object(r.useState)(92)),d=Object(E.a)(m,2),p=d[0],f=d[1],b=Object(r.useState)(),g=Object(E.a)(b,2),h=g[0],v=g[1],y=Object(r.useState)(0),O=Object(E.a)(y,2),x=O[0],C=O[1],D=Object(r.useState)(0),P=Object(E.a)(D,2),T=P[0],A=P[1],W=Object(r.useState)(0),R=Object(E.a)(W,2),F=R[0],z=R[1],q=S().currentUser,U=Object(r.useState)([]),_=Object(E.a)(U,2),B=_[0],Q=_[1],G=Object(r.useState)([]),J=Object(E.a)(G,2),X=J[0],K=J[1],$=Object(r.useState)([]),Z=Object(E.a)($,2),ee=Z[0],ae=Z[1],re=Object(r.useState)([]),ce=Object(E.a)(re,2),ie=ce[0],se=ce[1],de=Object(r.useState)([]),fe=Object(E.a)(de,2),ge=fe[0],he=fe[1],je=Object(r.useState)(!1),xe=Object(E.a)(je,2),Se=xe[0],Ce=xe[1],we=Object(r.useState)(0),Ne=Object(E.a)(we,2),ke=Ne[0],De=Ne[1],Pe=Object(r.useState)(0),Te=Object(E.a)(Pe,2),Ie=Te[0],Ae=Te[1],Me=function(e,t){De(t)};(new Date).toISOString().slice(0,10);function We(e){return n.a.createElement(Y.a,Object.assign({elevation:6,variant:"filled"},e))}function Fe(e){var t=e.children,a=e.value,r=e.index;return n.a.createElement("div",{role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a===r&&n.a.createElement(M.a,{p:3},n.a.createElement(k.a,null,t)))}q&&q.uid&&(e=j.collection("orders").where("userID","==",q.uid).where("orderStatus","==",1)),t=j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X"),Object(r.useEffect)((function(){(function(){var t=Object(V.a)(L.a.mark((function t(){var a,r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get();case 2:a=t.sent,r=[],a.forEach((function(e){r.push(e.data())})),Q(r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return e.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(e.data())})),Q(t)}))}),[]),Object(r.useEffect)((function(){return j.collection("users").onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(Object(ne.a)(Object(ne.a)({},e.data()),{},{id:e.Df.key.path.segments[6]}))})),ae(t)}))}),[]),Object(r.useEffect)((function(){return t.onSnapshot((function(e){e&&(e.data()&&f(e.data().price),e.data()&&C(e.data().minQuantity),e.data()&&A(e.data().startingStock),e.data()&&z(e.data().maxFutureDay),e.data()&&v(e.data().lastUpdated))}))}),[]),q&&(l=j.collection("orders").where("userID","==",q.uid)),Object(r.useEffect)((function(){(function(){var e=Object(V.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get();case 2:t=e.sent,a=[],t.forEach((function(e){1!==e.data().orderStatus&&a.push(e.data())})),se(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return l.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){1!==e.data().orderStatus&&t.push(e.data())})),se(t)}))}),[]),a=j.collection("orders").where("orderStatus","==",1),Object(r.useEffect)((function(){(function(){var e=Object(V.a)(L.a.mark((function e(){var t,r;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get();case 2:t=e.sent,r=[],t.forEach((function(e){r.push(e.data())})),K(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return a.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(e.data())})),K(t)}))}),[]),q&&q.uid&&(c=j.collection("orders")),Object(r.useEffect)((function(){(function(){var e=Object(V.a)(L.a.mark((function e(){var t,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get();case 2:t=e.sent,a=[],t.forEach((function(e){a.push(e.data())})),he(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return c.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(e.data())})),he(t)}))}),[]);var ze=Object(r.useState)(),qe=Object(E.a)(ze,2),Ue=qe[0],_e=qe[1];Object(r.useEffect)((function(){try{j.collection("users").doc(q.uid).onSnapshot((function(e){e&&_e(e.data())}))}catch(e){console.log(e),console.log("Failed to get user data")}}),[q]);var Be=function(){Ce(!0)},Ve=function(e){return n.a.createElement(N.a,{item:!0,lg:3,sm:6,xl:3,xs:12},n.a.createElement(et,{order:e,userdata:Ue,price:p,openNotification:Be}))},Ge=new Date,Ye=(new Date).toLocaleString("default",{month:"long"}),He=function(){var e=ge.filter((function(e){return 2===e.orderStatus})).filter((function(e){return e.delivered&&"02"===oe()(e.delivered).format("MM")}));console.log(e);var t=[],a=[],r=[];return e.forEach((function(e){return e.price&&t.push(Number(e.price))})),console.log(t),e.filter((function(e){return 1===e.paymentType})).forEach((function(e){return e.price&&a.push(Number(e.price))})),e.filter((function(e){return 2===e.paymentType})).forEach((function(e){return e.price&&r.push(Number(e.price))})),{total:t.length>0?1===t.length?t[0]:t.reduce((function(e,t){return e+t}),0):0,cash:a.length>0?1===a.length?a[0]:a.reduce((function(e,t){return e+t}),0):0,credit:r.length>0?1===r.length?r[0]:r.reduce((function(e,t){return e+t}),0):0}},Je=[{title:"Orders to be fulfilled",value:ge.filter((function(e){return 1===e.orderStatus})).length,icon:n.a.createElement(pe.a,null)},{title:"Completed Orders Today",value:ge.filter((function(e){return 2===e.orderStatus})).filter((function(e){return e.delivered&&oe()(e.delivered).format("DD/MM/YYYY")===oe()(Ge).format("DD/MM/YYYY")})).length,icon:n.a.createElement(ve.a,null)},{title:"Cash Sales Today",value:He().cash.toLocaleString(),icon:n.a.createElement(pe.a,null)},{title:"Credit Sales Today",value:He().credit.toLocaleString(),icon:n.a.createElement(ve.a,null)},{title:"".concat(Ye," Orders"),value:He().total.toLocaleString(),icon:n.a.createElement(Ee.a,null)},{title:"Opening Stock",value:T,icon:n.a.createElement(be.a,null)},{title:"Available Stock",value:"8,773 Ltrs",icon:n.a.createElement(be.a,null)}];return n.a.createElement(n.a.Fragment,null,Ue&&void 0!==Ue.isOwner&&n.a.createElement("div",null,n.a.createElement(le.a,{color:"white",maxWidth:!0},n.a.createElement(ye.a,{"aria-label":"ownerNavigationTabs",value:ke,onChange:Me},n.a.createElement(Oe.a,{label:n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"10px"}},n.a.createElement(mt.a,{p:2,fontSize:"small"})," ",n.a.createElement("p",{style:{paddingLeft:"10px"}},"Home"))}),n.a.createElement(Oe.a,{label:n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"10px"}},n.a.createElement(ue.a,{p:2,fontSize:"small"})," ",n.a.createElement("p",{style:{paddingLeft:"10px"}},"Orders"))}),n.a.createElement(Oe.a,{label:n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"10px"}},n.a.createElement(me.a,{p:2,fontSize:"small"})," ",n.a.createElement("p",{style:{paddingLeft:"10px"}},"Customers"))})))),n.a.createElement(te,{className:o.root,title:"Dashboard"},s&&n.a.createElement(H,null),n.a.createElement(w.a,{maxWidth:!1},Ue&&Ue.isCustomer&&n.a.createElement("div",null,n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},"Welcome ",q&&q.displayName),n.a.createElement(N.a,{container:!0,spacing:3},n.a.createElement(N.a,{item:!0,lg:3,sm:6,xl:3,xs:12},n.a.createElement(Re,{price:p,userData:Ue,minQuantity:x,startingStock:T,maxFutureDay:F})),B.map((function(e){return Ve(e)})),ie&&ie.length>0&&n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement("div",{className:o.tab},n.a.createElement(I.a,{position:"static"},n.a.createElement(ye.a,{value:ke,onChange:Me,"aria-label":"orderCreditHistoryTab"},n.a.createElement(Oe.a,{label:"Order History"}),n.a.createElement(Oe.a,{label:"Credit History"}))),n.a.createElement(Fe,{value:ke,index:0},ie&&ie.length>0&&n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Le,{orders:ie,userdata:Ue}))),n.a.createElement(Fe,{value:ke,index:1},"Item Two"))))),Ue&&Ue.isDriver&&n.a.createElement("div",null,n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},"Welcome ",q&&q.displayName),n.a.createElement(N.a,{container:!0,spacing:3},X.map((function(e){return Ve(e)})),ge&&ge.length>0&&n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Le,{orders:ge,userdata:Ue})))),Ue&&void 0!==Ue.isOwner&&n.a.createElement("div",null,n.a.createElement(Fe,{value:ke,index:0},n.a.createElement(N.a,{container:!0,spacing:2},n.a.createElement(N.a,{item:!0,xs:!0,lg:4},n.a.createElement(it,{month:Ye,total:He().total,cash:He().cash,credit:He().credit})),n.a.createElement(N.a,{item:!0,xs:!0},n.a.createElement(N.a,{container:!0,spacing:3},n.a.createElement(N.a,{item:!0,lg:4,sm:6,xl:3,xs:12},n.a.createElement(Re,{price:p,lastUpdated:h})),Je.map((function(e){return n.a.createElement(N.a,{item:!0,lg:4,sm:6,xl:3,xs:12},n.a.createElement(at,{title:e.title,value:e.value,icon:e.icon}))})))),ge&&ge.length>0&&n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Le,{orders:ge,userdata:Ue})))),n.a.createElement(Fe,{value:ke,index:1},n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement("div",{className:o.tab},n.a.createElement(I.a,{position:"static"},n.a.createElement(ye.a,{value:Ie,onChange:function(e,t){Ae(t)},"aria-label":"orderPageTab"},n.a.createElement(Oe.a,{label:"All Orders"}),n.a.createElement(Oe.a,{label:"Pending Orders"}))),n.a.createElement(Fe,{value:Ie,index:0},ge&&ge.length>0&&n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Le,{orders:ge,userdata:Ue}))),n.a.createElement(Fe,{value:Ie,index:1},X&&X.length>0?n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Le,{orders:X,userdata:Ue})):"No Pending Orders")))),n.a.createElement(Fe,{value:ke,index:2},ee&&ee.length>0&&n.a.createElement(N.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Qe,{users:ee,orders:ge})))),n.a.createElement(ut.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Se,autoHideDuration:5e3,onClose:function(){return Ce(!1)},key:"TransitionLeft"},n.a.createElement(We,{severity:"error"},"Order Cancelled!")))))},ft=a(15),bt=a(53),gt=a(684),Et=a(679),ht=a(670),vt=a(671),yt=a(672),Ot=a(673),jt=a(674),xt=a(675),St=a(676),Ct=a(677),wt=Object(u.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},icon:{marginRight:e.spacing(1)},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),Nt=function(e){var t=e.className,a=e.href,r=e.icon,l=e.title,c=Object(D.a)(e,["className","href","icon","title"]),o=wt();return n.a.createElement(Je.a,Object.assign({className:Object(T.a)(o.item,t),disableGutters:!0},c),n.a.createElement(G.a,{activeClassName:o.active,className:o.button,component:bt.b,to:a},r&&n.a.createElement(r,{className:o.icon,size:"20"}),n.a.createElement("span",{className:o.title},l)))},kt="/static/images/avatars/avatar_6.png",Dt="Senior Developer",Pt="Katarina Smith",Tt=[{href:"/app/dashboard",icon:ht.a,title:"Dashboard"},{href:"/app/customers",icon:vt.a,title:"Customers"},{href:"/app/products",icon:yt.a,title:"Products"},{href:"/app/account",icon:Ot.a,title:"Account"},{href:"/app/settings",icon:jt.a,title:"Settings"},{href:"/login",icon:xt.a,title:"Login"},{href:"/register",icon:St.a,title:"Register"},{href:"/404",icon:Ct.a,title:"Error"}],It=Object(u.a)((function(){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)"},avatar:{cursor:"pointer",width:64,height:64}}})),At=function(e){var t=e.onMobileClose,a=e.openMobile,l=It(),c=Object(ft.d)();Object(r.useEffect)((function(){a&&t&&t()}),[c.pathname]);var o=n.a.createElement(M.a,{height:"100%",display:"flex",flexDirection:"column"},n.a.createElement(M.a,{alignItems:"center",display:"flex",flexDirection:"column",p:2},n.a.createElement(W.a,{className:l.avatar,component:bt.a,src:kt,to:"/app/account"}),n.a.createElement(k.a,{className:l.name,color:"textPrimary",variant:"h5"},Pt),n.a.createElement(k.a,{color:"textSecondary",variant:"body2"},Dt)),n.a.createElement(Ye.a,null),n.a.createElement(M.a,{p:2},n.a.createElement(He.a,null,Tt.map((function(e){return n.a.createElement(Nt,{href:e.href,key:e.title,title:e.title,icon:e.icon})})))),n.a.createElement(M.a,{flexGrow:1}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(gt.a,{lgUp:!0},n.a.createElement(Et.a,{anchor:"left",classes:{paper:l.mobileDrawer},onClose:t,open:a,variant:"temporary"},o)),n.a.createElement(gt.a,{mdDown:!0},n.a.createElement(Et.a,{anchor:"left",classes:{paper:l.desktopDrawer},open:!0,variant:"persistent"},o)))};At.defaultProps={onMobileClose:function(){},openMobile:!1};var Mt=a(278),Wt=a(421),Rt=a.n(Wt),Ft=a(422),zt=a.n(Ft),qt=a(423),Ut=a.n(qt),_t=a(263),Bt=a.n(_t),Lt=Object(u.a)((function(e){return{root:{height:"100%","& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},button:{margin:e.spacing(1)}}}));function Vt(e){var t,a=Lt(),l=S().currentUser;l&&(t=j.collection("users").doc(l.uid));var c=Object(r.useState)(),o=Object(E.a)(c,2),i=o[0],u=o[1];Object(r.useEffect)((function(){(function(){var e=Object(V.a)(L.a.mark((function e(){var a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get();case 2:a=e.sent,u(a.data()),a.data()&&a.data().address&&p(a.data().address.map((function(e){return{id:e.id,tag:e.tag,value:e.value}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=Object(r.useState)([{id:Object(Ne.a)(),tag:"",value:""}]),m=Object(E.a)(s,2),d=m[0],p=m[1],f=Object(r.useState)(""),b=Object(E.a)(f,2),g=b[0],h=b[1],v=Object(r.useState)(!1),y=Object(E.a)(v,2),O=y[0],x=y[1],C=Object(r.useState)(l.displayName.split(" ")[0]),N=Object(E.a)(C,2),D=N[0],P=N[1],T=Object(r.useState)(l.displayName.split(" ")[1]),I=Object(E.a)(T,2),A=I[0],W=I[1],R=Object(r.useState)(),F=Object(E.a)(R,2),z=F[0],q=F[1],U=function(e,t){console.log(d,e,t);var a=d.map((function(a){return e===a.id&&(a[t.target.name]=t.target.value,console.log(t.target.name,t.target.value)),a}));p(a)},_=function(){p([].concat(Object(Se.a)(d),[{id:Object(Ne.a)(),tag:"",value:""}]))};function B(){return(B=Object(V.a)(L.a.mark((function t(a){var r;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==D&&""!==A){t.next=3;break}return t.abrupt("return",h("Name Cannot be empty"));case 3:if(!z||"undefined"===typeof z){t.next=11;break}if(new RegExp(/^[0-9\b]+$/).test(z)){t.next=9;break}return t.abrupt("return",h("Please enter only number"));case 9:if(10===z.length){t.next=11;break}return t.abrupt("return",h("Please enter valid phone number"));case 11:return t.prev=11,h(""),x(!0),l.updateProfile({displayName:"".concat(D," ").concat(A)}).then((function(){console.log("Name Updated")}),(function(e){h(e)})),r=Object(ne.a)(Object(ne.a)({},i),{},{mobileNumber:z||i.mobileNumber,address:d}),console.log(r),t.abrupt("return",j.collection("users").doc(l.uid).set(r).then((function(){return e.closeOrder()})));case 20:t.prev=20,t.t0=t.catch(11),console.log(t.t0),h("Failed to Update account");case 24:x(!1);case 25:case"end":return t.stop()}}),t,null,[[11,20]])})))).apply(this,arguments)}return n.a.createElement("div",null,n.a.createElement($.a,null,n.a.createElement(M.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(w.a,{maxWidth:"sm"},n.a.createElement(M.a,{mb:3},n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},"Update your profile")),g&&n.a.createElement(Y.a,{severity:"error"},g),n.a.createElement("form",{className:a.root,noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"First Name",margin:"normal",name:"firstName",variant:"outlined",required:!0,defaultValue:D,onChange:function(e){return P(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Last Name",margin:"normal",name:"LastName",variant:"outlined",required:!0,defaultValue:A,onChange:function(e){return W(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Mobile number",margin:"normal",name:"mobileNumber",variant:"outlined",required:!0,defaultValue:e.userData&&e.userData.mobileNumber,onChange:function(e){return q(e.target.value)}}),i&&i.isCustomer&&d&&d.length>0&&d.map((function(e){return console.log(e),n.a.createElement("div",{key:e.id},n.a.createElement(Q.a,{name:"tag",label:"Tag",variant:"outlined",style:{width:"25%"},defaultValue:e?e.tag:"",onChange:function(t){return U(e.id,t)}}),n.a.createElement(Q.a,{name:"value",label:"Value",variant:"outlined",defaultValue:e?e.value:"",style:{width:"48%"},onChange:function(t){return U(e.id,t)}}),n.a.createElement(Xe.a,{disabled:d&&1===d.length,onClick:function(){return function(e){var t=Object(Se.a)(d);t=t.filter((function(t){return t.id!==e})),console.log(t,t.filter((function(t){return t.id!==e}))),p(t)}(e.id)}},n.a.createElement(Bt.a,null)),n.a.createElement(Xe.a,{onClick:_},n.a.createElement(Pe.a,null)))})))))),n.a.createElement(K.a,null,n.a.createElement(G.a,{disabled:O,onClick:function(e){return B.apply(this,arguments)},color:"primary"},"Update Profile"),n.a.createElement(G.a,{onClick:e.closeOrder,color:"primary"},"Close")))}var Qt=Object(u.a)((function(e){return{root:{height:"100%","& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},button:{margin:e.spacing(1)}}}));function Gt(e){var t,a=Qt(),l=Object(r.useState)(e.price),c=Object(E.a)(l,2),o=c[0],i=c[1],u=Object(r.useState)({}),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(0),v=Object(E.a)(h,2),y=v[0],O=v[1],x=Object(r.useState)(0),S=Object(E.a)(x,2),C=S[0],N=S[1],D=Object(r.useState)(0),P=Object(E.a)(D,2),T=P[0],I=P[1],A=Object(r.useState)(!1),W=Object(E.a)(A,2),R=W[0],F=W[1];t=j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X"),Object(r.useEffect)((function(){return t.onSnapshot((function(e){e&&(console.log(e.data()),e.data()&&i(e.data().price),e.data()&&O(e.data().minQuantity),e.data()&&N(e.data().startingStock),e.data()&&I(e.data().maxFutureDay))}))}),[]);var z=function(e,t){switch(e){case"fuelPrice":isNaN(t)&&d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{fuelPrice:{message:"Price has to be a valid number"}})})),isNaN(t)||Number(t)||d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{fuelPrice:{message:"Price cannot be 0"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{fuelPrice:null})})),i(t));break;case"startingStock":isNaN(t)&&d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{startingStock:{message:"Stock has to be a valid number"}})})),isNaN(t)||Number(t)||d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{startingStock:{message:"Stock cannot be 0"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{startingStock:null})})),N(t));break;case"minQuantity":isNaN(t)&&d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{minQuantity:{message:"Quantity has to be a valid number"}})})),isNaN(t)||Number(t)||d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{minQuantity:{message:"Minimum Quantity cannot be 0"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{minQuantity:null})})),O(t));break;case"maxFutureDay":isNaN(t)&&d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{maxFutureDay:{message:"PLease provide valid number"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ne.a)(Object(ne.a)({},e),{},{maxFutureDay:null})})),I(t))}};function q(){return(q=Object(V.a)(L.a.mark((function t(a){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault();try{j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X").update({price:parseInt(o),lastUpdated:Date.now(),minQuantity:y,maxFutureDay:T,startingStock:C}).then((function(){console.log("Document successfully written!"),F(!0),setTimeout((function(){F(!1),e.closeOrder()}),1e3)}))}catch(r){console.log(r),console.log("Failed to get user data")}g(!1);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return n.a.createElement("div",null,n.a.createElement(J.a,{open:R,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},n.a.createElement(Y.a,{severity:"success"},n.a.createElement($e.a,null,"Success"),n.a.createElement("strong",null,"Settings Updated"))),n.a.createElement($.a,null,n.a.createElement(M.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(w.a,{maxWidth:"sm"},n.a.createElement(M.a,{mb:3},n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},"Update settings")),n.a.createElement("form",{className:a.root,noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"Fuel Price",margin:"normal",name:"fuelPrice",variant:"outlined",required:!0,defaultValue:o,onChange:function(e){return z(e.target.name,e.target.value)}}),m&&m.fuelPrice&&n.a.createElement(Y.a,{severity:"error"},m.fuelPrice.message),C&&n.a.createElement(Q.a,{fullWidth:!0,label:"Starting Stock",margin:"normal",name:"startingStock",variant:"outlined",required:!0,defaultValue:C,onChange:function(e){return z(e.target.name,e.target.value)}}),m&&m.startingStock&&n.a.createElement(Y.a,{severity:"error"},m.startingStock.message),y&&n.a.createElement(Q.a,{fullWidth:!0,label:"Minimum Quantity",margin:"normal",name:"minQuantity",variant:"outlined",required:!0,type:"number",defaultValue:y,onChange:function(e){return z(e.target.name,e.target.value)}}),m&&m.minQuantity&&n.a.createElement(Y.a,{severity:"error"},m.minQuantity.message),n.a.createElement("div",null,n.a.createElement(Q.a,{fullWidth:!0,label:"Vehicle number",margin:"normal",name:"vehicleNumber",variant:"outlined",required:!0,disabled:!0}),n.a.createElement(Q.a,{fullWidth:!0,label:"Driver name",margin:"normal",name:"driverName",variant:"outlined",required:!0,disabled:!0}),T&&n.a.createElement(Q.a,{fullWidth:!0,label:"Advanced booking limit(days)",margin:"normal",name:"maxFutureDay",variant:"outlined",required:!0,defaultValue:T,onChange:function(e){return z(e.target.name,e.target.value)}}),m&&m.maxFutureDay&&n.a.createElement(Y.a,{severity:"error"},m.maxFutureDay.message)))))),n.a.createElement(K.a,null,n.a.createElement(G.a,{disabled:b,onClick:function(e){return q.apply(this,arguments)},color:"primary"},"Update Settings"),n.a.createElement(G.a,{onClick:e.closeOrder,color:"primary"},"Close")))}var Yt=Object(f.a)();Yt.typography.h2=Object(P.a)({fontSize:"0.8rem","@media (min-width:600px)":{fontSize:"1.2rem"}},Yt.breakpoints.up("md"),{fontSize:"2rem"});var Ht=Object(u.a)((function(){return{root:{},avatar:{width:60,height:60}}})),Jt=function(e){var t=e.className,a=(e.onMobileNavOpen,e.userData),l=e.price,c=Object(D.a)(e,["className","onMobileNavOpen","userData","price"]),u=Ht(),s=Object(r.useState)([]),m=Object(E.a)(s,1)[0],d=S().logout,p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(!1),v=Object(E.a)(h,2),y=(v[0],v[1],S().currentUser,Object(r.useState)(!1)),O=Object(E.a)(y,2),j=O[0],x=O[1],C=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&x(e)}},w=function(){g(!1)};function N(){return(N=Object(V.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d();case 4:Object(o.navigate)("/login",!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(I.a,Object.assign({className:Object(T.a)(u.root,t),elevation:0},c),n.a.createElement(A.a,null,n.a.createElement(R,null),n.a.createElement(M.a,{flexGrow:1}),n.a.createElement(i.a,{theme:Yt},n.a.createElement(k.a,{style:{color:"white"},variant:"h2"},"Shakti Ganapathi Fuel Station")),n.a.createElement(M.a,{flexGrow:1}),a&&a.isOwner&&n.a.createElement(Xe.a,{color:"inherit"},n.a.createElement(Mt.a,{badgeContent:m.length,color:"primary",variant:"dot"},n.a.createElement(Rt.a,{onClick:C(!0)}))),n.a.createElement(Xe.a,{color:"inherit"},n.a.createElement(Mt.a,{badgeContent:m.length,color:"primary",variant:"dot"},n.a.createElement(zt.a,{onClick:function(){g(!0)}}))),n.a.createElement(Xe.a,{color:"inherit"},n.a.createElement(Ut.a,{onClick:function(e){return N.apply(this,arguments)}})))),n.a.createElement("div",null,b&&n.a.createElement(J.a,{open:b,onClose:w,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"sm"},n.a.createElement(Vt,{userData:a,closeOrder:w}))),n.a.createElement("div",null,n.a.createElement(Et.a,{anchor:"right",open:j,onClose:C(!1)},n.a.createElement(Gt,{userData:a,price:l,closeOrder:C(!1)})))))},Xt=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"},footer:{padding:e.spacing(1.5,1),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800],bottom:0,position:"sticky"}}})),Kt=function(e){var t=e.children,a=Xt(),l=S().currentUser,c=Object(r.useState)(!1),o=Object(E.a)(c,2),i=(o[0],o[1]),u=Object(r.useState)(),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(92),f=Object(E.a)(p,2),b=f[0],g=f[1],h=j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X");return Object(r.useEffect)((function(){try{j.collection("users").doc(l.uid).onSnapshot((function(e){return d(e.data())}))}catch(e){console.log(e),console.log("Failed to Update user data")}return h.onSnapshot((function(e){e&&e.data()&&g(e.data().price)}))}),[]),n.a.createElement("div",{className:a.root},n.a.createElement(Jt,{onMobileNavOpen:function(){return i(!0)},userData:m,updateUserData:d,price:b,setPrice:g}),m&&void 0!==m.isOwner&&n.a.createElement("p",null,"HI"),n.a.createElement("div",{className:a.wrapper},n.a.createElement("div",{className:a.contentContainer},n.a.createElement("div",{className:a.content},t,n.a.createElement("footer",{className:a.footer},n.a.createElement(w.a,null,n.a.createElement(N.a,{container:!0,justify:"center",className:a.pos},n.a.createElement(N.a,{item:!0},n.a.createElement(k.a,{style:{color:"black"},variant:"caption"},"Phone : 9008761088 | Email : r6mesh@gmail.com | Toll Free No : 1800 2333 555")))))))))},$t=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),Zt=function(){var e=$t(),t=S().signup,a=(S().currentUser,Object(r.useState)("")),l=Object(E.a)(a,2),c=l[0],i=l[1],u=Object(r.useState)(!1),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(!1),v=Object(E.a)(h,2),y=v[0],O=v[1],x=Object(r.useState)(!1),C=Object(E.a)(x,2),N=C[0],D=C[1],P=Object(r.useState)(!1),T=Object(E.a)(P,2),I=T[0],A=T[1],W=Object(r.useState)(!1),R=Object(E.a)(W,2),F=R[0],z=R[1],q=Object(r.useState)(!1),U=Object(E.a)(q,2),_=U[0],B=U[1];function H(){return(H=Object(V.a)(L.a.mark((function e(a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),I===F){e.next=3;break}return e.abrupt("return",i("Passwords do not match"));case 3:if(!_||"undefined"===typeof _){e.next=11;break}if(new RegExp(/^[0-9\b]+$/).test(_)){e.next=9;break}return e.abrupt("return",i("Please enter only number"));case 9:if(10===_.length){e.next=11;break}return e.abrupt("return",i("Please enter valid phone number"));case 11:return e.prev=11,i(""),d(!0),e.next=16,t(N,I).then((function(e){return e.user.updateProfile({displayName:"".concat(b," ").concat(y)}).then((function(){console.log("Name Updated")})),j.collection("users").doc(e.user.uid).set({isCustomer:!0,mobileNumber:_,customerName:"".concat(b," ").concat(y),email:N,created:oe()(new Date).format("MMM Do YYYY")})}));case 16:Object(o.navigate)("/app/dashboard",{replace:!0}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),i("Failed to create an account");case 22:d(!1);case 23:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}return n.a.createElement(te,{className:e.root,title:"Register"},n.a.createElement(M.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(w.a,{maxWidth:"sm"},n.a.createElement(M.a,{mb:3},n.a.createElement(k.a,{color:"textPrimary",variant:"h2"},"Create new account"),n.a.createElement(k.a,{color:"textSecondary",gutterBottom:!0,variant:"body2"},"Use your email to create new account")),c&&n.a.createElement(Y.a,{severity:"error"},c),n.a.createElement("form",{className:"form",noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"First Name",margin:"normal",name:"firstName",variant:"outlined",onChange:function(e){return g(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Last Name",margin:"normal",name:"LastName",variant:"outlined",onChange:function(e){return O(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Mobile number",margin:"normal",name:"mobileNumber",variant:"outlined",required:!0,onChange:function(e){return B(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Email",margin:"normal",name:"email",type:"email",variant:"outlined",required:!0,onChange:function(e){return D(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Password",margin:"normal",name:"password",type:"password",variant:"outlined",required:!0,onChange:function(e){return A(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Confirm Password",margin:"normal",name:"confirmPassword",type:"password",variant:"outlined",required:!0,onChange:function(e){return z(e.target.value)}}),n.a.createElement(M.a,{my:2},n.a.createElement(G.a,{color:"primary",disabled:m,fullWidth:!0,size:"large",type:"submit",variant:"contained",onClick:function(e){return H.apply(this,arguments)}},"Sign up now"))),n.a.createElement(k.a,{color:"textSecondary",variant:"body1"},"Have an account?"," ",n.a.createElement(o.A,{href:"/login",variant:"h6"},"Sign in")))))},ea=function(){var e={"/":function(){return n.a.createElement(_,null,n.a.createElement(re,null))},"/login":function(){return n.a.createElement(_,null,n.a.createElement(re,null))},"/app/dashboard":function(){return n.a.createElement(Kt,null,n.a.createElement(pt,null))},"/register":function(){return n.a.createElement(_,null,n.a.createElement(Zt,null))}},t=Object(o.useRoutes)(e);return n.a.createElement(C,null,n.a.createElement(i.a,{theme:g},n.a.createElement(d,null),t||n.a.createElement("h1",null,"Invalid routing")))};a(605),a(606);c.a.render(n.a.createElement(ea,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[442,1,2]]]);
//# sourceMappingURL=main.9d0f71ee.chunk.js.map