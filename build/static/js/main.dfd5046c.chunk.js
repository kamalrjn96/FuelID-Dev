(this["webpackJsonpreact-material-dashboard"]=this["webpackJsonpreact-material-dashboard"]||[]).push([[0],{442:function(e,t,a){e.exports=a(607)},607:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(18),c=a.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(447);var o=a(55),i=a(660),u=a(58),s=a(381),m=Object(u.a)((function(){return Object(s.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),d=function(){return m(),null},p=a(101);p.Chart.helpers.extend(p.Chart.elements.Rectangle.prototype,{draw:function(){var e,t,a,r,n,l,c,o,i=this._chart.ctx,u=this._view,s=u.borderWidth,m=this._chart.config.options.cornerRadius;if(m<0&&(m=0),"undefined"===typeof m&&(m=0),u.horizontal?(e=u.base,t=u.x,a=u.y-u.height/2,r=u.y+u.height/2,n=t>e?1:-1,l=1,c=u.borderSkipped||"left"):(e=u.x-u.width/2,t=u.x+u.width/2,a=u.y,n=1,l=(r=u.base)>a?1:-1,c=u.borderSkipped||"bottom"),s){var d=Math.min(Math.abs(e-t),Math.abs(a-r)),p=(s=s>d?d:s)/2,f=e+("left"!==c?p*n:0),b=t+("right"!==c?-p*n:0),g=a+("top"!==c?p*l:0),E=r+("bottom"!==c?-p*l:0);f!==b&&(a=g,r=E),g!==E&&(e=f,t=b)}i.beginPath(),i.fillStyle=u.backgroundColor,i.strokeStyle=u.borderColor,i.lineWidth=s;var h=[[e,r],[e,a],[t,a],[t,r]],v=["bottom","left","top","right"].indexOf(c,0);function y(e){return h[(v+e)%4]}-1===v&&(v=0);var O=y(0);i.moveTo(O[0],O[1]);for(var j=1;j<4;j+=1){O=y(j);var x=j+1;4===x&&(x=0);var C=h[2][0]-h[1][0],w=h[0][1]-h[1][1],S=h[1][0],N=h[1][1];if((o=m)>Math.abs(w)/2&&(o=Math.floor(Math.abs(w)/2)),o>Math.abs(C)/2&&(o=Math.floor(Math.abs(C)/2)),w<0){var k=S,D=S+C,P=N+w,T=N+w,W=S,I=S+C,M=N,F=N;i.moveTo(W+o,M),i.lineTo(I-o,F),i.quadraticCurveTo(I,F,I,F-o),i.lineTo(D,T+o),i.quadraticCurveTo(D,T,D-o,T),i.lineTo(k+o,P),i.quadraticCurveTo(k,P,k,P+o),i.lineTo(W,M-o),i.quadraticCurveTo(W,M,W+o,M)}else if(C<0){var q=S+C,z=S,R=N,A=N,V=S+C,Q=S,U=N+w,L=N+w;i.moveTo(V+o,U),i.lineTo(Q-o,L),i.quadraticCurveTo(Q,L,Q,L-o),i.lineTo(z,A+o),i.quadraticCurveTo(z,A,z-o,A),i.lineTo(q+o,R),i.quadraticCurveTo(q,R,q,R+o),i.lineTo(V,U-o),i.quadraticCurveTo(V,U,V+o,U)}else i.moveTo(S+o,N),i.lineTo(S+C-o,N),i.quadraticCurveTo(S+C,N,S+C,N+o),i.lineTo(S+C,N+w-o),i.quadraticCurveTo(S+C,N+w,S+C-o,N+w),i.lineTo(S+o,N+w),i.quadraticCurveTo(S,N+w,S,N+w-o),i.lineTo(S,N+o),i.quadraticCurveTo(S,N,S+o,N)}i.fill(),s&&i.stroke()}});var f=a(113),b=a(10),g=Object(f.a)({palette:{background:{dark:"#F4F6F8",default:b.a.common.white,paper:b.a.common.white},primary:{main:b.a.indigo[500]},secondary:{main:b.a.indigo[500]},text:{primary:b.a.blueGrey[900],secondary:b.a.blueGrey[600]}},shadows:["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],typography:{h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}}}),E=a(5),h=a(385),v=a.n(h),y=(a(552),a(555),v.a.initializeApp({apiKey:"AIzaSyBS8fF70P7rkE-o9S4rv00UpA6y8iIDMxs",authDomain:"fuelid-development.firebaseapp.com",databaseURL:"https://fuelid-development-default-rtdb.firebaseio.com/",projectId:"fuelid-development",storageBucket:"fuelid-development.appspot.com",messagingSenderId:"868371686973",appId:"1:868371686973:web:da385aea79b6cdfb5fec54"})),O=y.auth(),j=y.firestore(),x=n.a.createContext();function C(){return Object(r.useContext)(x)}function w(e){var t=e.children,a=Object(r.useState)(),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)(!0),u=Object(E.a)(i,2),s=u[0],m=u[1];Object(r.useEffect)((function(){return O.onAuthStateChanged((function(e){o(e),m(!1)}))}),[]);var d={currentUser:c,login:function(e,t){return O.signInWithEmailAndPassword(e,t)},signup:function(e,t){return O.createUserWithEmailAndPassword(e,t)},logout:function(){return O.signOut()},resetPassword:function(e){return O.sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return n.a.createElement(x.Provider,{value:d},!s&&t)}var S=a(32),N=a(2),k=a(648),D=a(649),P=a(686),T=function(e){return n.a.createElement(P.a,Object.assign({alt:"Logo",src:"/static/logo.jpg"},e))},W=Object(u.a)({root:{},toolbar:{height:64}}),I=function(e){var t=e.className,a=Object(S.a)(e,["className"]),r=W();return n.a.createElement(k.a,Object.assign({className:Object(N.a)(r.root,t),elevation:0},a),n.a.createElement(D.a,{className:r.toolbar},n.a.createElement(T,null)))},M=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"}}})),F=function(e){var t=e.children,a=M();return n.a.createElement("div",{className:a.root},n.a.createElement(I,null),n.a.createElement("div",{className:a.wrapper},n.a.createElement("div",{className:a.contentContainer},n.a.createElement("div",{className:a.content},t))))},q=a(20),z=a.n(q),R=a(35),A=(a(379),a(380),a(680)),V=a(650),Q=a(430),U=a(138),L=a(60),B=a(656),G=a(681),H=function(){var e=C().currentUser,t=Object(r.useState)(!0),a=Object(E.a)(t,2),l=a[0],c=a[1],o=Object(r.useState)(),i=Object(E.a)(o,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){try{j.collection("users").doc(e.uid).get().then((function(e){e&&(s(e.data()),console.log(e.data()),console.log(u),c(!1))}))}catch(t){console.log(t),console.log("Failed to get user data")}}),[e]),l&&n.a.createElement("div",null,"Loading...")},Y=a(651),X=a(137),J=a(655),$=a(654),_=a(653),K=a(389),Z=Object(r.forwardRef)((function(e,t){var a=e.children,r=e.title,l=void 0===r?"":r,c=Object(S.a)(e,["children","title"]);return n.a.createElement("div",Object.assign({ref:t},c),n.a.createElement(K.a,null,n.a.createElement("title",null,l)),a)})),ee=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},scrollPaper:{alignItems:"baseline"}}})),te=function(){var e=ee(),t=Object(r.useRef)(""),a=Object(r.useRef)(""),l=C(),c=l.login,i=l.resetPassword,u=l.currentUser,s=Object(r.useState)(""),m=Object(E.a)(s,2),d=m[0],p=m[1],f=Object(r.useState)(!1),b=Object(E.a)(f,2),g=b[0],h=b[1],v=Object(r.useState)(!1),y=Object(E.a)(v,2),O=y[0],j=y[1],x=Object(r.useState)(!1),w=Object(E.a)(x,2),S=w[0],N=w[1],k=Object(r.useState)(!1),D=Object(E.a)(k,2),P=D[0],T=D[1],W=Object(r.useState)(!1),I=Object(E.a)(W,2),M=I[0],F=I[1],q=function(){return n.a.createElement(H,null)};function K(){return(K=Object(R.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,p(""),h(!0),e.next=6,c(O,P);case 6:q(),Object(o.navigate)("/app/dashboard",!0),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p("Failed to log in");case 13:h(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function te(){return(te=Object(R.a)(z.a.mark((function e(){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(S).then((function(){window.alert("Email has been sent to ".concat(S))})).catch((function(e){console.log(e.code,e.message),window.alert("".concat(e.message," Enter Valid e-mail ID"))}));case 2:N(),ae();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=function(){F(!1)};function re(e){e.target.style.cursor="pointer"}return n.a.createElement(n.a.Fragment,null,u?Object(o.navigate)("/app/dashboard",!0):n.a.createElement(Z,{className:e.root,title:"Login"},n.a.createElement(A.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(V.a,{maxWidth:"sm"},n.a.createElement(Y.a,{open:M,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:ae,className:e.scrollPaper},n.a.createElement(_.a,null,"Enter Email ID to reset Password"),n.a.createElement($.a,null,n.a.createElement("form",{className:e.container},n.a.createElement(X.a,{className:e.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Remarks",margin:"normal",name:"cancelRemarks",variant:"outlined",required:!0,onChange:function(e){return N(e.target.value)}}),n.a.createElement(J.a,null,n.a.createElement(U.a,{onMouseOver:function(e){return re(e)},onClick:function(e){return ae()},color:"primary"},"Cancel"),n.a.createElement(U.a,{onMouseOver:function(e){return re(e)},onClick:function(){return te.apply(this,arguments)},color:"primary"},"Ok")))))),n.a.createElement(A.a,{mb:3},n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},"Sign in")),d&&n.a.createElement(G.a,{severity:"error"},d),n.a.createElement("form",{className:"form",noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"Email Address",margin:"normal",name:"email",type:"email",required:!0,variant:"outlined",innerRef:t,onChange:function(e){return j(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Password",margin:"normal",name:"password",type:"password",variant:"outlined",innerRef:a,onChange:function(e){return T(e.target.value)},required:!0}),n.a.createElement(A.a,{my:2},n.a.createElement(U.a,{color:"primary",disabled:g,fullWidth:!0,size:"large",type:"submit",variant:"contained",onClick:function(e){return K.apply(this,arguments)}},"Sign in now"),n.a.createElement(B.a,{container:!0},n.a.createElement(B.a,{item:!0,xs:!0},n.a.createElement(U.a,{onClick:function(){F(!0)}},"Forgot password?")),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",variant:"body1"},"Don't have an account?"," ",n.a.createElement(o.A,{href:"/register",variant:"body2"},"Sign up"))))))))))},ae=a(17),re=a(92),ne=(a(560),a(419)),le=a.n(ne),ce=a(420),oe=a.n(ce),ie=a(205),ue=a.n(ie),se=a(275),me=a.n(se),de=a(417),pe=a.n(de),fe=a(274),be=a.n(fe),ge=a(682),Ee=a(668),he=a(658),ve=a(659),ye=a(24),Oe=(a(578),a(215)),je=a(108),xe=a(683),Ce=a(657),we=a(112),Se=a.n(we),Ne=a(615),ke=Object(u.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function De(e){var t,a=ke(),l=Object(r.useState)(e.minQuantity),c=Object(E.a)(l,2),o=c[0],i=c[1],u=Object(r.useState)(1),s=Object(E.a)(u,2),m=s[0],d=(s[1],Object(r.useState)("")),p=Object(E.a)(d,2),f=p[0],b=p[1],g=Object(r.useState)(),h=Object(E.a)(g,2),v=h[0],y=h[1],O=Object(r.useState)(),x=Object(E.a)(O,2),w=x[0],S=x[1],N=Object(r.useState)(new Date("2014-08-18T21:11:54")),k=Object(E.a)(N,2),D=(k[0],k[1],Object(r.useState)([])),P=Object(E.a)(D,2),T=P[0],W=P[1],I=C().currentUser;I&&(t=j.collection("users").doc(I.uid));var M=Object(r.useState)(e.userData),F=Object(E.a)(M,2),q=F[0],z=F[1],R=Object(r.useState)(q&&q.address?q.address:""),V=Object(E.a)(R,2),H=V[0],K=V[1],Z=Object(r.useState)(q&&q.address?q.address[0].value:""),ee=Object(E.a)(Z,2),te=ee[0],re=ee[1],ne=Math.floor(1e3+9e3*Math.random()),le=Object(r.useState)(!1),ce=Object(E.a)(le,2),oe=ce[0],ie=ce[1],ue=function(){ie(!1)};return n.a.createElement("div",null,n.a.createElement($.a,null,n.a.createElement(B.a,{container:!0,direction:"column",justify:"space-around",alignItems:"center",width:"100%"},n.a.createElement(B.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(B.a,{item:!0},n.a.createElement(A.a,{display:"flex",flexDirection:"row",justifyContent:"flex-start"},n.a.createElement(A.a,{flexDirection:"column"},n.a.createElement(L.a,{color:"textSecondary",variant:"h6"}),n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},I&&I.displayName),n.a.createElement(L.a,{color:"primary",variant:"h6"},q&&q.mobileNumber))))),n.a.createElement(B.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"primary",variant:"caption"},""),n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},te))),n.a.createElement(B.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(B.a,{item:!0},n.a.createElement(X.a,{className:a.formControl,width:1},q&&q.address&&n.a.createElement(Oe.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:te,onChange:function(e){re(e.target.value)}},H.map((function(e){return n.a.createElement(je.a,{key:e.tag,value:e.value},e.tag)}))),n.a.createElement(Ne.a,null,"Select Address"))),n.a.createElement(B.a,{item:!0}),n.a.createElement(B.a,{item:!0},n.a.createElement(A.a,{display:"flex",flexDirection:"row-reverse"},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Ce.a,{size:"small",color:"secondary","aria-label":"add",onClick:function(){ie(!0)}},n.a.createElement(Se.a,null)),n.a.createElement(Ne.a,null,"Add new address"))))),n.a.createElement(B.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},n.a.createElement(B.a,{item:!0},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Q.a,{autoFocus:!0,id:"quantitySelect",label:"Qty",onChange:function(t){return a=t.target.value,console.log(a,e.minQuantity,Number(a)<Number(e.minQuantity)),i(a),Number(a)<Number(e.minQuantity)&&W(["Minimum order quantity is ".concat(e.minQuantity," litres")]),void(Number(a)>=Number(e.minQuantity)&&(Number(a)*e.price>1e4&&W(["Credit Limit Exceeded"]),Number(a)*e.price<=1e4&&W([])));var a},type:"number",min:e.minQuantity,defaultValue:e.minQuantity}),n.a.createElement(Ne.a,null,"Choose Quantity"))),n.a.createElement(B.a,{item:!0},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Q.a,{autoFocus:!0,id:"price",label:"Price",type:"text",value:o*e.price,InputProps:{readOnly:!0}}),n.a.createElement(Ne.a,null,"Calculated Price"))))),n.a.createElement(Q.a,{autoFocus:!0,fullWidth:!0,margin:"dense",id:"remarks",label:"Remarks",type:"text",onChange:function(e){return b(e.target.value)},placeholder:"Place order for a later date | Provide delivery instructions"}),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},"*Actual Price will depend on the actual quantity of the fuel Delivered."),n.a.createElement("br",null),n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},"**Fuel price is dependant on the day's pricing"),n.a.createElement("div",null,n.a.createElement(Y.a,{disableBackdropClick:!0,open:oe,onClose:ue},n.a.createElement(_.a,null,"Add New Address"),n.a.createElement($.a,null,n.a.createElement("form",{className:a.container},n.a.createElement(X.a,{className:a.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"New Tag",margin:"normal",name:"addressTag",variant:"outlined",required:!0,onChange:function(e){return y(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"New Address",margin:"normal",name:"address",variant:"outlined",required:!0,onChange:function(e){return S(e.target.value)}})))),n.a.createElement(J.a,null,n.a.createElement(U.a,{onClick:ue,color:"primary"},"Cancel"),n.a.createElement(U.a,{onClick:function(e){var a;e.preventDefault(),a=q.address?[].concat(Object(ye.a)(q.address),[{id:Object(xe.a)(),tag:v,value:w}]):[{id:Object(xe.a)(),tag:v,value:w}],K(a),re(a[a.length-1].value);var r=Object(ae.a)(Object(ae.a)({},q),{},{address:a});z(r),t.set(r).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)})),console.log(r),ie(!1)},color:"primary"},"Ok"))))),T&&T.length>0&&n.a.createElement(G.a,{severity:"error"},T),n.a.createElement(J.a,null,n.a.createElement(U.a,{onClick:function(){j.collection("orders").doc("SG-".concat(ne)).set({userID:I.uid,orderID:"SG-".concat(ne),quantity:o,price:o*e.price,paymentType:m,orderStatus:1,remarks:f,customerName:I.displayName,mobileNumber:q.mobileNumber,created:Date.now(),addressValue:te,OTP:Math.floor(1e3+9e3*Math.random())}).then((function(){console.log("Document successfully written!"),e.closeOrder()})).catch((function(e){console.error("Error writing document: ",e)}))},color:"primary",disabled:0!==T.length},"Place Order"),n.a.createElement(U.a,{onClick:e.closeOrder,color:"primary"},"Close")))}var Pe=Object(u.a)((function(e){return{root:{height:"100%"},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),Te=function(e){var t=Pe(),a=C().currentUser,l=((new Date).toISOString().slice(0,10),Object(r.useState)(e.userData)),c=Object(E.a)(l,2),o=c[0],i=c[1];Object(r.useEffect)((function(){try{j.collection("users").doc(a.uid).get().then((function(e){e&&i(e.data())}))}catch(e){console.log(e),console.log("Failed to get user data")}}),[]);var u=Object(r.useState)(!1),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(e.price),v=Object(E.a)(h,2),y=v[0],O=v[1],x=function(){d(!1)},w=function(){g(!1)};return n.a.createElement(he.a,{className:Object(N.a)(t.root)},o&&o.isCustomer&&n.a.createElement("div",null,n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:3},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"Today's Price"),n.a.createElement(L.a,{color:"textPrimary",variant:"h3"},e.price)),n.a.createElement(A.a,{mt:4,display:"flex",alignItems:"center",justifyContent:"center",paddingRight:2},n.a.createElement(U.a,{color:"primary",fullWidth:!0,size:"small",type:"submit",variant:"contained",onClick:function(){d(!0)}},"Order Now"))),n.a.createElement(A.a,{mt:2,display:"flex",alignItems:"center"},n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},n.a.createElement("i",{className:"fas fa-rupee-sign"})," / Litre"))),n.a.createElement("div",null,m&&n.a.createElement(Y.a,{open:m,onClose:x,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"sm"},n.a.createElement(De,{price:e.price,userData:e.userData,minQuantity:e.minQuantity,closeOrder:x})))),o&&o.isOwner&&n.a.createElement("div",null,n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:3},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},"Selling price today"),n.a.createElement(L.a,{color:"textPrimary",variant:"h3"},e.price,"  ",n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},n.a.createElement("i",{className:"fas fa-rupee-sign"})," / Litre"))),n.a.createElement(A.a,{display:"flex",alignItems:"center",justifyContent:"center",paddingRight:2},n.a.createElement(U.a,{color:"primary",fullWidth:!0,size:"small",type:"submit",variant:"contained",onClick:function(){g(!0)}},"Set Price")))),n.a.createElement("div",null,b&&n.a.createElement("div",null,n.a.createElement(Y.a,{open:b,onClose:x,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"sm"},n.a.createElement(_.a,null,"Set Price"),n.a.createElement($.a,null,n.a.createElement("form",{className:t.container},n.a.createElement(X.a,{className:t.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Price",margin:"normal",name:"price",variant:"outlined",required:!0,defaultValue:e.price,onChange:function(e){return O(e.target.value)}})))),n.a.createElement(J.a,null,n.a.createElement(U.a,{onClick:w,color:"primary"},"Cancel"),n.a.createElement(U.a,{onClick:function(e){e.preventDefault();try{j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X").update({price:parseInt(y),lastUpdated:Date.now()}).then((function(){console.log("Document successfully written!")}))}catch(t){console.log(t),console.log("Failed to get user data")}w()},color:"primary"},"Ok")))))))},We=a(56),Ie=a.n(We),Me=(a(378),a(687)),Fe=a(393),qe=a(203),ze=a.n(qe),Re=a(201),Ae=Object(u.a)((function(){return{root:{},actions:{justifyContent:"flex-end"}}})),Ve=function(e){var t=Ae(),a=Object(r.useState)([]),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)({}),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(null),p=Object(E.a)(d,2),f=p[0],b=p[1],g=function(){b(null)};Object(r.useEffect)((function(){var t=[];t.push.apply(t,Object(ye.a)(e.orders.map((function(e){return e.id=e.orderID,e.quantity=1!==e.orderStatus?e.deliveredQuantity:e.quantity,e.completed=e.delivered?e.delivered:e.cancelled,e})))),o(t)}),[]);var h=[{field:"orderID",headerName:"Order Ref",width:120},{field:"customerName",headerName:"Customer name",width:160},{field:"addressValue",headerName:"Location",width:180},{field:"created",headerName:"Date Ordered",type:"date",width:160,renderCell:function(e){return Ie()(e.value).format("DD/MM/YYYY HH:mm")}},{field:"completed",headerName:"Date Completed",type:"date",width:160,renderCell:function(e){return e.value?Ie()(e.value).format("DD/MM/YYYY HH:mm"):""}},{field:"paymentType",headerName:"Payment Method",renderCell:function(e){return 1===e.value?"Cash":"Credit"},width:180},{field:"quantity",headerName:"Quantity(Ltrs)",width:150},{field:"price",headerName:"Amount(Rs)",width:140},{field:"orderStatus",headerName:"Status",width:100,renderCell:function(e){return n.a.createElement(Me.a,{style:1===e.value?{backgroundColor:"orange",color:"white"}:2===e.value?{backgroundColor:"green",color:"white"}:{backgroundColor:"red",color:"white"},label:1===e.value?"Pending":2===e.value?"Fulfilled":"Cancelled",size:"small"})}},{field:"actions",headerName:"Actions",sortable:!1,width:120,renderCell:function(e){return n.a.createElement(ze.a,{color:"primary",size:"small",onMouseOver:function(e){return function(e){e.target.style.cursor="pointer"}(e)},onClick:function(t){return function(e,t){b(e.currentTarget),m(t.row)}(t,e)}})}}];return n.a.createElement(he.a,{className:Object(N.a)(t.root)},c&&0!==c.length&&n.a.createElement(V.a,{style:{height:400,width:"100%"}},n.a.createElement(Re.a,{rows:c,columns:h,pageSize:10}),n.a.createElement(Fe.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:g},n.a.createElement(je.a,{onClick:g},"View Order details"),2===s.orderStatus&&n.a.createElement(je.a,{onClick:function(){return console.log(s)}},"View Invoice"),2===s.orderStatus&&n.a.createElement(je.a,{onClick:g},"Download Invoice"))))},Qe=Object(u.a)((function(){return{root:{},actions:{justifyContent:"flex-end"}}})),Ue=function(e){var t=Qe(),a=Object(r.useState)([]),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)({}),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(null),p=Object(E.a)(d,2),f=p[0],b=p[1];Object(r.useEffect)((function(){console.log(e.users);var t=[];t.push.apply(t,Object(ye.a)(e.users.map((function(e){return e})))),o(t)}),[]);var g=[{field:"customerName",headerName:"Name",width:130},{field:"mobileNumber",headerName:"Phone/Email",width:160,renderCell:function(e){return n.a.createElement(B.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},n.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0,variant:"body2"},e.row.mobileNumber),n.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0,variant:"body2"},e.row.email))}},{field:"addressValue",headerName:"Address",width:180,renderCell:function(e){return e.row.address&&e.row.address[0].value}},{field:"creditLimit",headerName:"Credit Limit",width:180},{field:"totalOrders",headerName:"Total Orders",width:180},{field:"orderValue",headerName:"Order Value",width:180},{field:"created",headerName:"Customer Since",width:180},{field:"actions",headerName:"Action",sortable:!1,width:120,renderCell:function(e){return n.a.createElement(ze.a,{color:"primary",size:"small",onMouseOver:function(e){return function(e){e.target.style.cursor="pointer"}(e)},onClick:function(t){return function(e,t){b(e.currentTarget),m(t.row)}(t,e)}})}}];return n.a.createElement(he.a,{className:Object(N.a)(t.root)},c&&0!==c.length&&n.a.createElement("div",{style:{height:400,width:"100%"}},n.a.createElement(Re.a,{rows:c,columns:g,pageSize:10}),n.a.createElement(Fe.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:function(){b(null)}},n.a.createElement(je.a,{onClick:function(){return console.log(s)}},"Edit User details"))))},Le=a(661),Be=a(662),Ge=a(614),He=a(616),Ye=(a(663),a(664),a(107)),Xe=(a(413),a(204),Object(xe.a)(),Ie()().subtract(2,"hours"),Object(xe.a)(),Ie()().subtract(2,"hours"),Object(xe.a)(),Ie()().subtract(3,"hours"),Object(xe.a)(),Ie()().subtract(5,"hours"),Object(xe.a)(),Ie()().subtract(9,"hours"),Object(u.a)({root:{height:"100%"},image:{height:48,width:48}}),a(19)),Je=(a(414),Object(u.a)((function(){return{root:{}}})),a(665),a(415),Object(u.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:b.a.orange[600],height:56,width:56}}})),a(666)),$e=Object(u.a)((function(e){return{root:{height:"100%",minWidth:275},avatar:{backgroundColor:b.a.green[600],height:56,width:56},differenceIcon:{color:b.a.green[900]},differenceValue:{color:b.a.green[900],marginRight:e.spacing(1)},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},formControl:{margin:e.spacing(1),minWidth:120}}})),_e=function(e){var t=$e(),a=Object(r.useState)(1),l=Object(E.a)(a,2),c=l[0],o=l[1],i=Object(r.useState)(0),u=Object(E.a)(i,2),s=u[0],m=u[1],d=Object(r.useState)(0),p=Object(E.a)(d,2),f=p[0],b=p[1],g=Object(r.useState)(0),h=Object(E.a)(g,2),v=(h[0],h[1],Object(r.useState)()),y=Object(E.a)(v,2),O=y[0],x=y[1],w=Object(r.useState)(!1),S=Object(E.a)(w,2),k=S[0],D=S[1],P=Object(r.useState)(!1),T=Object(E.a)(P,2),W=T[0],I=T[1],M=Object(r.useState)(!1),F=Object(E.a)(M,2),q=F[0],z=F[1],R=Object(r.useState)(""),A=Object(E.a)(R,2),V=A[0],H=A[1];C().currentUser;Object(r.useEffect)((function(){setTimeout((function(){D(!1)}),2e3)}),[k]),Object(r.useEffect)((function(){setTimeout((function(){I(!1)}),2e3)}),[W]);var K=function(){z(!0)},Z=function(){z(!1)};function ee(e){e.target.style.cursor="pointer"}function te(t,a,r){t.preventDefault(),j.collection("orders").doc(a).update({orderStatus:3,cancelled:Date.now(),cancelledBy:r,cancelRemark:V}).then((function(){e.openNotification(),console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)})),Z()}return n.a.createElement(he.a,{className:Object(N.a)(t.root)},e.userdata&&e.userdata.isCustomer&&n.a.createElement("div",null,n.a.createElement(Y.a,{open:q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:Z},n.a.createElement(_.a,null,"Add Remarks"),n.a.createElement($.a,null,n.a.createElement("form",{className:t.container,onSubmit:function(t){return te(t,e.order.orderID,"Customer")}},n.a.createElement(X.a,{className:t.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Remarks",margin:"normal",name:"cancelRemarks",variant:"outlined",required:!0,onChange:function(e){return H(e.target.value)}}),n.a.createElement(J.a,null,n.a.createElement(U.a,{onMouseOver:function(e){return ee(e)},onClick:function(e){return Z()},color:"primary"},"Cancel"),n.a.createElement(U.a,{onMouseOver:function(e){return ee(e)},onClick:function(t){return te(t,e.order.orderID,"Customer")},color:"primary",type:"submit"},"Ok")))))),n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:1},n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:6},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",variant:"h3"},"Current Order"),n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},e.order.orderID)),n.a.createElement(B.a,{item:!0},n.a.createElement(Me.a,{color:"secondary",onMouseOver:function(e){return ee(e)},label:"Cancel",onClick:function(e){return K()},size:"small"}))),n.a.createElement(B.a,{item:!0},n.a.createElement(B.a,{container:!0,justify:"center",spacing:4},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},e.order.quantity," ",n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},"Liters"))),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},n.a.createElement("i",{variant:"caption",className:"fas fa-rupee-sign"})," ",e.order.price)),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},1===e.order.paymentType?"Cash":"Credit")))),n.a.createElement(B.a,{item:!0},n.a.createElement(B.a,{container:!0,justify:"center",spacing:8},n.a.createElement(B.a,{item:!0},n.a.createElement(Me.a,{color:"secondary",label:"In-Progress",size:"small"})),n.a.createElement(B.a,{item:!0,alignItems:"center"},n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},"OTP : ".concat(e.order.OTP)))))))),e.userdata&&e.userdata.isDriver&&n.a.createElement("div",null,n.a.createElement(Y.a,{open:q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",onClose:Z},n.a.createElement(_.a,null,"Add Remarks"),n.a.createElement($.a,null,n.a.createElement("form",{className:t.container,onSubmit:function(t){return te(t,e.order.orderID,"Driver")}},n.a.createElement(X.a,{className:t.formControl},n.a.createElement(Q.a,{fullWidth:!0,label:"Remarks",margin:"normal",name:"cancelRemarks",variant:"outlined",required:!0,onChange:function(e){return H(e.target.value)}}),n.a.createElement(J.a,null,n.a.createElement(U.a,{onMouseOver:function(e){return ee(e)},onClick:function(e){return Z()},color:"primary"},"Cancel"),n.a.createElement(U.a,{onMouseOver:function(e){return ee(e)},onClick:function(t){return te(t,e.order.orderID,"Driver")},color:"primary",type:"submit"},"Ok")))))),n.a.createElement(Y.a,{open:k,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},n.a.createElement(G.a,{severity:"success"},n.a.createElement(Je.a,null,"Success"),n.a.createElement("strong",null,"Order Completed!!"))),n.a.createElement(Y.a,{open:W,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},n.a.createElement(G.a,{severity:"error"},n.a.createElement(Je.a,null,"Failed"),n.a.createElement("strong",null,"Incorrect OTP!!"))),n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:6},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{className:t.title,color:"textSecondary",gutterBottom:!0},e.order.orderID)),n.a.createElement(B.a,{item:!0},n.a.createElement(Me.a,{color:"secondary",label:"In-Progress",size:"small"})),n.a.createElement(B.a,{item:!0},n.a.createElement(Me.a,{style:{backgroundColor:"gray",color:"white"},onMouseOver:function(e){return ee(e)},label:"Cancel",onClick:function(e){return K()},size:"small"}))),n.a.createElement(L.a,{variant:"h5",component:"h2"},e.order.customerName),n.a.createElement(L.a,{className:t.pos,color:"textSecondary"},e.order.mobileNumber),n.a.createElement(L.a,{variant:"body2",className:t.pos,component:"p"},e.order.addressValue),n.a.createElement(B.a,{container:!0,justify:"space-between",className:t.pos},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},e.order.quantity," ",n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},"Liters"))),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},n.a.createElement("i",{variant:"caption",className:"fas fa-rupee-sign"})," ",e.order.price)),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},1===e.order.paymentType?"Cash":"Credit"))),1===c&&n.a.createElement(B.a,{container:!0,justify:"space-between"},n.a.createElement(B.a,{item:!0},n.a.createElement(U.a,{color:"primary",size:"small",onClick:function(){return o(2)},variant:"contained"},"Enter OTP"))),2===c&&n.a.createElement(B.a,{container:"true",direction:"row",justify:"space-between",spacing:1},n.a.createElement(B.a,{item:!0},n.a.createElement(Q.a,{name:"otp",label:"OTP",variant:"outlined",size:"small",onChange:function(e){return x(e.target.value)},style:{width:"50%"}})),n.a.createElement(B.a,{item:!0},n.a.createElement(U.a,{color:"primary",size:"small",onClick:function(){var t;(t=e.order.OTP)&&O==t?(o(3),x()):(I(!0),o(1),x(),console.log("OTP verification failed"))},variant:"contained"},"Verify OTP"))),3===c&&n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:2},n.a.createElement(B.a,{item:!0},n.a.createElement(Q.a,{name:"actualQuantity",label:"Quantity",variant:"outlined",size:"small",onChange:function(e){return m(e.target.value)}})),n.a.createElement(B.a,{item:!0},n.a.createElement(Q.a,{name:"deliveryCharge",label:"DeliveryCharge",variant:"outlined",size:"small",onChange:function(e){return b(e.target.value)},notched:"true"})),n.a.createElement(B.a,{item:!0},n.a.createElement(U.a,{color:"primary",size:"small",onClick:function(){return function(t,a,r){var n;t&&a&&(n=Number(t)*Number(e.price)+Number(a)),j.collection("orders").doc(r).update({orderStatus:2,delivered:Date.now(),price:Number(n),deliveredQuantity:Number(t),deliveryCharge:Number(a)}).then((function(){D(!0),console.log("Document successfully written!"),o(1),x()})).catch((function(e){I(!0),console.error("Error writing document: ",e),o(1),x()}))}(s,f,e.order.orderID)},variant:"contained"},"Complete Order"))),n.a.createElement("br",null),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},e.order.remarks)))),e.userdata&&e.userdata.isOwner&&n.a.createElement("div",null,n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:6},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{className:t.title,color:"textSecondary",gutterBottom:!0},e.order.orderID)),n.a.createElement(B.a,{item:!0},n.a.createElement(Me.a,{color:"secondary",label:"In-Progress",size:"small"}))),n.a.createElement(L.a,{variant:"h5",component:"h2"},e.order.customerName),n.a.createElement(L.a,{className:t.pos,color:"textSecondary"},e.order.mobileNumber),n.a.createElement(L.a,{variant:"body2",className:t.pos,component:"p"},e.order.addressValue),n.a.createElement(B.a,{container:!0,justify:"space-between",className:t.pos},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},e.order.quantity," ",n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},"Liters"))),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},n.a.createElement("i",{variant:"caption",className:"fas fa-rupee-sign"})," ",e.order.price)),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"h4"},1===e.order.paymentType?"Cash":"Credit"))),n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",variant:"caption"},e.order.remarks)))))},Ke=Object(u.a)((function(){return{root:{height:"100%"},avatar:{backgroundColor:b.a.indigo[600],height:56,width:56}}})),Ze=function(e){var t=e.className,a=e.title,r=e.value,l=e.icon,c=Object(S.a)(e,["className","title","value","icon"]),o=Ke();return n.a.createElement(he.a,Object.assign({className:Object(N.a)(o.root,t)},c),n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,justify:"space-between",spacing:3},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0,variant:"h6"},a),n.a.createElement(L.a,{color:"textPrimary",variant:"h3"},r)),n.a.createElement(B.a,{item:!0},n.a.createElement(P.a,{className:o.avatar},l)))))},et=a(262),tt=a.n(et),at=a(416),rt=a.n(at),nt=Object(u.a)((function(){return{root:{height:"100%"},gridRoot:{flexGrow:"1"}}})),lt=function(e){var t=e.className,a=Object(S.a)(e,["className"]),r=nt(),l=Object(Xe.a)(),c={datasets:[{data:[67,33],backgroundColor:[b.a.green[500],b.a.orange[600]],borderWidth:8,borderColor:b.a.common.white,hoverBorderColor:b.a.common.white}],labels:["Cash","Credit"]},o={animation:!1,cutoutPercentage:80,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,tooltips:{backgroundColor:l.palette.background.default,bodyFontColor:l.palette.text.secondary,borderColor:l.palette.divider,borderWidth:1,enabled:!0,footerFontColor:l.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:l.palette.text.primary}},i=[{title:"Cash",value:67,icon:tt.a,color:b.a.green[500]},{title:"Credit",value:33,icon:rt.a,color:b.a.orange[600]}];return n.a.createElement(he.a,Object.assign({className:Object(N.a)(r.root,t)},a),n.a.createElement(Le.a,{title:"Monthly Earning"}),n.a.createElement(ve.a,null,n.a.createElement(B.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:2},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{color:"textPrimary",variant:"body1"},"This Month"),n.a.createElement(L.a,{color:"textPrimary",variant:"body1"},n.a.createElement("strong",null,"35,34,242"))),n.a.createElement(B.a,{item:!0},n.a.createElement(A.a,{position:"relative"},n.a.createElement(p.Doughnut,{data:c,options:o})),n.a.createElement(A.a,{display:"flex",justifyContent:"center",mt:2},i.map((function(e){var t=e.color,a=e.icon,r=e.title,l=e.value;return n.a.createElement(A.a,{key:r,p:1,textAlign:"center"},n.a.createElement(a,{color:"action"}),n.a.createElement(L.a,{color:"textPrimary",variant:"body1"},r),n.a.createElement(L.a,{style:{color:t},variant:"h2"},l,"%"))})))))),n.a.createElement(A.a,{display:"flex",ml:2},n.a.createElement(L.a,{color:"primary",variant:"caption"},"Total value of Earnings for the month of Dec 2020 in Rupees")))},ct=a(669),ot=a(418),it=a.n(ot),ut=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(.5)},tab:{backgroundColor:e.palette.background.paper,width:"100%"}}})),st=function(){var e,t,a,l,c,o=ut(),i=Object(r.useState)(!0),u=Object(E.a)(i,2),s=u[0],m=(u[1],Object(r.useState)(92)),d=Object(E.a)(m,2),p=d[0],f=d[1],b=Object(r.useState)(0),g=Object(E.a)(b,2),h=g[0],v=g[1],y=Object(r.useState)(0),O=Object(E.a)(y,2),x=O[0],w=O[1],S=Object(r.useState)(0),N=Object(E.a)(S,2),D=N[0],P=N[1],T=C().currentUser,W=Object(r.useState)([]),I=Object(E.a)(W,2),M=I[0],F=I[1],q=Object(r.useState)([]),Q=Object(E.a)(q,2),U=Q[0],Y=Q[1],X=Object(r.useState)([]),J=Object(E.a)(X,2),$=J[0],_=J[1],K=Object(r.useState)([]),ee=Object(E.a)(K,2),te=ee[0],ne=ee[1],ce=Object(r.useState)([]),ie=Object(E.a)(ce,2),se=ie[0],de=ie[1],fe=Object(r.useState)(!1),he=Object(E.a)(fe,2),ve=he[0],ye=he[1],Oe=Object(r.useState)(0),je=Object(E.a)(Oe,2),xe=je[0],Ce=je[1],we=Object(r.useState)(0),Se=Object(E.a)(we,2),Ne=Se[0],ke=Se[1],De=function(e,t){Ce(t)};(new Date).toISOString().slice(0,10);function Pe(e){return n.a.createElement(G.a,Object.assign({elevation:6,variant:"filled"},e))}function We(e){var t=e.children,a=e.value,r=e.index;return n.a.createElement("div",{role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a===r&&n.a.createElement(A.a,{p:3},n.a.createElement(L.a,null,t)))}T&&T.uid&&(e=j.collection("orders").where("userID","==",T.uid).where("orderStatus","==",1)),t=j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X"),Object(r.useEffect)((function(){(function(){var t=Object(R.a)(z.a.mark((function t(){var a,r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get();case 2:a=t.sent,r=[],a.forEach((function(e){r.push(e.data())})),F(r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return e.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(e.data())})),F(t)}))}),[]),Object(r.useEffect)((function(){return j.collection("users").onSnapshot((function(e){var t=[];e&&e.forEach((function(e){console.log(e),t.push(Object(ae.a)(Object(ae.a)({},e.data()),{},{id:e.Df.key.path.segments[6]}))})),_(t)}))}),[]),Object(r.useEffect)((function(){return t.onSnapshot((function(e){e&&(e.data()&&f(e.data().price),e.data()&&v(e.data().minQuantity),e.data()&&w(e.data().startingStock),e.data()&&P(e.data().maxFutureDay))}))}),[]),T&&(l=j.collection("orders").where("userID","==",T.uid)),Object(r.useEffect)((function(){(function(){var e=Object(R.a)(z.a.mark((function e(){var t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get();case 2:t=e.sent,a=[],t.forEach((function(e){1!==e.data().orderStatus&&a.push(e.data())})),ne(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return l.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){1!==e.data().orderStatus&&t.push(e.data())})),ne(t)}))}),[]),a=j.collection("orders").where("orderStatus","==",1),Object(r.useEffect)((function(){(function(){var e=Object(R.a)(z.a.mark((function e(){var t,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get();case 2:t=e.sent,r=[],t.forEach((function(e){r.push(e.data())})),Y(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return a.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(e.data())})),Y(t)}))}),[]),T&&T.uid&&(c=j.collection("orders")),Object(r.useEffect)((function(){(function(){var e=Object(R.a)(z.a.mark((function e(){var t,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.get();case 2:t=e.sent,a=[],t.forEach((function(e){a.push(e.data())})),de(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){return c.onSnapshot((function(e){var t=[];e&&e.forEach((function(e){t.push(e.data())})),de(t)}))}),[]);var Ie=Object(r.useState)(),Me=Object(E.a)(Ie,2),Fe=Me[0],qe=Me[1];Object(r.useEffect)((function(){try{j.collection("users").doc(T.uid).onSnapshot((function(e){e&&qe(e.data())}))}catch(e){console.log(e),console.log("Failed to get user data")}}),[T]);var ze=function(){ye(!0)},Re=function(e){return n.a.createElement(B.a,{item:!0,lg:3,sm:6,xl:3,xs:12},n.a.createElement(_e,{order:e,userdata:Fe,price:p,openNotification:ze}))},Ae=(new Date).toLocaleString("default",{month:"long"}),Qe=[{title:"Orders to be fulfilled",value:15,icon:n.a.createElement(ue.a,null)},{title:"Completed Orders Today",value:5,icon:n.a.createElement(be.a,null)},{title:"Cash Sales Today",value:"1,35,723",icon:n.a.createElement(ue.a,null)},{title:"Credit Sales Today",value:"87,273",icon:n.a.createElement(be.a,null)},{title:"".concat(Ae," Orders"),value:"1,35,723",icon:n.a.createElement(pe.a,null)},{title:"Opening Stock",value:"10,000 Ltrs",icon:n.a.createElement(me.a,null)},{title:"Available Stock",value:"8,773 Ltrs",icon:n.a.createElement(me.a,null)}];return n.a.createElement(n.a.Fragment,null,Fe&&void 0!==Fe.isOwner&&n.a.createElement("div",null,n.a.createElement(re.a,{color:"white",maxWidth:!0},n.a.createElement(ge.a,{"aria-label":"ownerNavigationTabs",value:xe,onChange:De},n.a.createElement(Ee.a,{label:n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"10px"}},n.a.createElement(it.a,{p:2,fontSize:"small"})," ",n.a.createElement("p",{style:{paddingLeft:"10px"}},"Home"))}),n.a.createElement(Ee.a,{label:n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"10px"}},n.a.createElement(le.a,{p:2,fontSize:"small"})," ",n.a.createElement("p",{style:{paddingLeft:"10px"}},"Orders"))}),n.a.createElement(Ee.a,{label:n.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",height:"10px"}},n.a.createElement(oe.a,{p:2,fontSize:"small"})," ",n.a.createElement("p",{style:{paddingLeft:"10px"}},"Customers"))})))),n.a.createElement(Z,{className:o.root,title:"Dashboard"},s&&n.a.createElement(H,null),n.a.createElement(V.a,{maxWidth:!1},Fe&&Fe.isCustomer&&n.a.createElement("div",null,n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},"Welcome ",T&&T.displayName),n.a.createElement(B.a,{container:!0,spacing:3},n.a.createElement(B.a,{item:!0,lg:3,sm:6,xl:3,xs:12},n.a.createElement(Te,{price:p,userData:Fe,minQuantity:h,startingStock:x,maxFutureDay:D})),M.map((function(e){return Re(e)})),te&&te.length>0&&n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement("div",{className:o.tab},n.a.createElement(k.a,{position:"static"},n.a.createElement(ge.a,{value:xe,onChange:De,"aria-label":"orderCreditHistoryTab"},n.a.createElement(Ee.a,{label:"Order History"}),n.a.createElement(Ee.a,{label:"Credit History"}))),n.a.createElement(We,{value:xe,index:0},te&&te.length>0&&n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Ve,{orders:te,userdata:Fe}))),n.a.createElement(We,{value:xe,index:1},"Item Two"))))),Fe&&Fe.isDriver&&n.a.createElement("div",null,n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},"Welcome ",T&&T.displayName),n.a.createElement(B.a,{container:!0,spacing:3},U.map((function(e){return Re(e)})),se&&se.length>0&&n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Ve,{orders:se,userdata:Fe})))),Fe&&void 0!==Fe.isOwner&&n.a.createElement("div",null,n.a.createElement(We,{value:xe,index:0},n.a.createElement(B.a,{container:!0,spacing:2},n.a.createElement(B.a,{item:!0,xs:!0,lg:4},n.a.createElement(lt,null)),n.a.createElement(B.a,{item:!0,xs:!0},n.a.createElement(B.a,{container:!0,spacing:3},n.a.createElement(B.a,{item:!0,lg:4,sm:6,xl:3,xs:12},n.a.createElement(Te,{price:p})),Qe.map((function(e){return n.a.createElement(B.a,{item:!0,lg:4,sm:6,xl:3,xs:12},n.a.createElement(Ze,{title:e.title,value:e.value,icon:e.icon}))})))),se&&se.length>0&&n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Ve,{orders:se,userdata:Fe})))),n.a.createElement(We,{value:xe,index:1},n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement("div",{className:o.tab},n.a.createElement(k.a,{position:"static"},n.a.createElement(ge.a,{value:Ne,onChange:function(e,t){ke(t)},"aria-label":"orderPageTab"},n.a.createElement(Ee.a,{label:"All Orders"}),n.a.createElement(Ee.a,{label:"Pending Orders"}))),n.a.createElement(We,{value:Ne,index:0},se&&se.length>0&&n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Ve,{orders:se,userdata:Fe}))),n.a.createElement(We,{value:Ne,index:1},U&&U.length>0?n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Ve,{orders:U,userdata:Fe})):"No Pending Orders")))),n.a.createElement(We,{value:xe,index:2},$&&$.length>0&&n.a.createElement(B.a,{item:!0,lg:12,md:12,xl:9,xs:12},n.a.createElement(Ue,{users:$})))),n.a.createElement(ct.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:ve,autoHideDuration:5e3,onClose:function(){return ye(!1)},key:"TransitionLeft"},n.a.createElement(Pe,{severity:"error"},"Order Cancelled!")))))},mt=a(15),dt=a(52),pt=a(685),ft=a(679),bt=a(670),gt=a(671),Et=a(672),ht=a(673),vt=a(674),yt=a(675),Ot=a(676),jt=a(677),xt=Object(u.a)((function(e){return{item:{display:"flex",paddingTop:0,paddingBottom:0},button:{color:e.palette.text.secondary,fontWeight:e.typography.fontWeightMedium,justifyContent:"flex-start",letterSpacing:0,padding:"10px 8px",textTransform:"none",width:"100%"},icon:{marginRight:e.spacing(1)},title:{marginRight:"auto"},active:{color:e.palette.primary.main,"& $title":{fontWeight:e.typography.fontWeightMedium},"& $icon":{color:e.palette.primary.main}}}})),Ct=function(e){var t=e.className,a=e.href,r=e.icon,l=e.title,c=Object(S.a)(e,["className","href","icon","title"]),o=xt();return n.a.createElement(He.a,Object.assign({className:Object(N.a)(o.item,t),disableGutters:!0},c),n.a.createElement(U.a,{activeClassName:o.active,className:o.button,component:dt.b,to:a},r&&n.a.createElement(r,{className:o.icon,size:"20"}),n.a.createElement("span",{className:o.title},l)))},wt="/static/images/avatars/avatar_6.png",St="Senior Developer",Nt="Katarina Smith",kt=[{href:"/app/dashboard",icon:bt.a,title:"Dashboard"},{href:"/app/customers",icon:gt.a,title:"Customers"},{href:"/app/products",icon:Et.a,title:"Products"},{href:"/app/account",icon:ht.a,title:"Account"},{href:"/app/settings",icon:vt.a,title:"Settings"},{href:"/login",icon:yt.a,title:"Login"},{href:"/register",icon:Ot.a,title:"Register"},{href:"/404",icon:jt.a,title:"Error"}],Dt=Object(u.a)((function(){return{mobileDrawer:{width:256},desktopDrawer:{width:256,top:64,height:"calc(100% - 64px)"},avatar:{cursor:"pointer",width:64,height:64}}})),Pt=function(e){var t=e.onMobileClose,a=e.openMobile,l=Dt(),c=Object(mt.d)();Object(r.useEffect)((function(){a&&t&&t()}),[c.pathname]);var o=n.a.createElement(A.a,{height:"100%",display:"flex",flexDirection:"column"},n.a.createElement(A.a,{alignItems:"center",display:"flex",flexDirection:"column",p:2},n.a.createElement(P.a,{className:l.avatar,component:dt.a,src:wt,to:"/app/account"}),n.a.createElement(L.a,{className:l.name,color:"textPrimary",variant:"h5"},Nt),n.a.createElement(L.a,{color:"textSecondary",variant:"body2"},St)),n.a.createElement(Be.a,null),n.a.createElement(A.a,{p:2},n.a.createElement(Ge.a,null,kt.map((function(e){return n.a.createElement(Ct,{href:e.href,key:e.title,title:e.title,icon:e.icon})})))),n.a.createElement(A.a,{flexGrow:1}));return n.a.createElement(n.a.Fragment,null,n.a.createElement(pt.a,{lgUp:!0},n.a.createElement(ft.a,{anchor:"left",classes:{paper:l.mobileDrawer},onClose:t,open:a,variant:"temporary"},o)),n.a.createElement(pt.a,{mdDown:!0},n.a.createElement(ft.a,{anchor:"left",classes:{paper:l.desktopDrawer},open:!0,variant:"persistent"},o)))};Pt.defaultProps={onMobileClose:function(){},openMobile:!1};var Tt=a(90),Wt=a(278),It=a(421),Mt=a.n(It),Ft=a(422),qt=a.n(Ft),zt=a(423),Rt=a.n(zt),At=a(263),Vt=a.n(At),Qt=Object(u.a)((function(e){return{root:{height:"100%","& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},button:{margin:e.spacing(1)}}}));function Ut(e){var t,a=Qt(),l=C().currentUser;l&&(t=j.collection("users").doc(l.uid));var c=Object(r.useState)(),o=Object(E.a)(c,2),i=o[0],u=o[1];Object(r.useEffect)((function(){(function(){var e=Object(R.a)(z.a.mark((function e(){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get();case 2:a=e.sent,u(a.data()),a.data()&&a.data().address&&p(a.data().address.map((function(e){return{id:e.id,tag:e.tag,value:e.value}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=Object(r.useState)([{id:Object(xe.a)(),tag:"",value:""}]),m=Object(E.a)(s,2),d=m[0],p=m[1],f=Object(r.useState)(""),b=Object(E.a)(f,2),g=b[0],h=b[1],v=Object(r.useState)(!1),y=Object(E.a)(v,2),O=y[0],x=y[1],w=Object(r.useState)(l.displayName.split(" ")[0]),S=Object(E.a)(w,2),N=S[0],k=S[1],D=Object(r.useState)(l.displayName.split(" ")[1]),P=Object(E.a)(D,2),T=P[0],W=P[1],I=Object(r.useState)(),M=Object(E.a)(I,2),F=M[0],q=M[1],B=function(e,t){console.log(d,e,t);var a=d.map((function(a){return e===a.id&&(a[t.target.name]=t.target.value,console.log(t.target.name,t.target.value)),a}));p(a)},H=function(){p([].concat(Object(ye.a)(d),[{id:Object(xe.a)(),tag:"",value:""}]))};function Y(){return(Y=Object(R.a)(z.a.mark((function t(a){var r;return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),""!==N&&""!==T){t.next=3;break}return t.abrupt("return",h("Name Cannot be empty"));case 3:if(!F||"undefined"===typeof F){t.next=11;break}if(new RegExp(/^[0-9\b]+$/).test(F)){t.next=9;break}return t.abrupt("return",h("Please enter only number"));case 9:if(10===F.length){t.next=11;break}return t.abrupt("return",h("Please enter valid phone number"));case 11:return t.prev=11,h(""),x(!0),l.updateProfile({displayName:"".concat(N," ").concat(T)}).then((function(){console.log("Name Updated")}),(function(e){h(e)})),r=Object(ae.a)(Object(ae.a)({},i),{},{mobileNumber:F||i.mobileNumber,address:d}),console.log(r),t.abrupt("return",j.collection("users").doc(l.uid).set(r).then((function(){return e.closeOrder()})));case 20:t.prev=20,t.t0=t.catch(11),console.log(t.t0),h("Failed to Update account");case 24:x(!1);case 25:case"end":return t.stop()}}),t,null,[[11,20]])})))).apply(this,arguments)}return n.a.createElement("div",null,n.a.createElement($.a,null,n.a.createElement(A.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(V.a,{maxWidth:"sm"},n.a.createElement(A.a,{mb:3},n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},"Update your profile")),g&&n.a.createElement(G.a,{severity:"error"},g),n.a.createElement("form",{className:a.root,noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"First Name",margin:"normal",name:"firstName",variant:"outlined",required:!0,defaultValue:N,onChange:function(e){return k(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Last Name",margin:"normal",name:"LastName",variant:"outlined",required:!0,defaultValue:T,onChange:function(e){return W(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Mobile number",margin:"normal",name:"mobileNumber",variant:"outlined",required:!0,defaultValue:e.userData&&e.userData.mobileNumber,onChange:function(e){return q(e.target.value)}}),i&&i.isCustomer&&d&&d.length>0&&d.map((function(e){return console.log(e),n.a.createElement("div",{key:e.id},n.a.createElement(Q.a,{name:"tag",label:"Tag",variant:"outlined",style:{width:"25%"},defaultValue:e?e.tag:"",onChange:function(t){return B(e.id,t)}}),n.a.createElement(Q.a,{name:"value",label:"Value",variant:"outlined",defaultValue:e?e.value:"",style:{width:"48%"},onChange:function(t){return B(e.id,t)}}),n.a.createElement(Ye.a,{disabled:d&&1===d.length,onClick:function(){return function(e){var t=Object(ye.a)(d);t=t.filter((function(t){return t.id!==e})),console.log(t,t.filter((function(t){return t.id!==e}))),p(t)}(e.id)}},n.a.createElement(Vt.a,null)),n.a.createElement(Ye.a,{onClick:H},n.a.createElement(Se.a,null)))})))))),n.a.createElement(J.a,null,n.a.createElement(U.a,{disabled:O,onClick:function(e){return Y.apply(this,arguments)},color:"primary"},"Update Profile"),n.a.createElement(U.a,{onClick:e.closeOrder,color:"primary"},"Close")))}var Lt=Object(u.a)((function(e){return{root:{height:"100%","& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{backgroundColor:b.a.red[600],height:56,width:56},differenceIcon:{color:b.a.red[900]},differenceValue:{color:b.a.red[900],marginRight:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},button:{margin:e.spacing(1)}}}));function Bt(e){var t,a=Lt(),l=Object(r.useState)(e.price),c=Object(E.a)(l,2),o=c[0],i=c[1],u=Object(r.useState)({}),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(0),v=Object(E.a)(h,2),y=v[0],O=v[1],x=Object(r.useState)(0),C=Object(E.a)(x,2),w=C[0],S=C[1],N=Object(r.useState)(0),k=Object(E.a)(N,2),D=k[0],P=k[1],T=Object(r.useState)(!1),W=Object(E.a)(T,2),I=W[0],M=W[1];t=j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X"),Object(r.useEffect)((function(){return t.onSnapshot((function(e){e&&(console.log(e.data()),e.data()&&i(e.data().price),e.data()&&O(e.data().minQuantity),e.data()&&S(e.data().startingStock),e.data()&&P(e.data().maxFutureDay))}))}),[]);var F=function(e,t){switch(e){case"fuelPrice":isNaN(t)&&d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{fuelPrice:{message:"Price has to be a valid number"}})})),isNaN(t)||Number(t)||d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{fuelPrice:{message:"Price cannot be 0"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{fuelPrice:null})})),i(t));break;case"startingStock":isNaN(t)&&d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{startingStock:{message:"Stock has to be a valid number"}})})),isNaN(t)||Number(t)||d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{startingStock:{message:"Stock cannot be 0"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{startingStock:null})})),S(t));break;case"minQuantity":isNaN(t)&&d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{minQuantity:{message:"Quantity has to be a valid number"}})})),isNaN(t)||Number(t)||d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{minQuantity:{message:"Minimum Quantity cannot be 0"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{minQuantity:null})})),O(t));break;case"maxFutureDay":isNaN(t)&&d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{maxFutureDay:{message:"PLease provide valid number"}})})),!isNaN(t)&&Number(t)&&(d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},{maxFutureDay:null})})),P(t))}};function q(){return(q=Object(R.a)(z.a.mark((function t(a){return z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault();try{j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X").update({price:parseInt(o),lastUpdated:Date.now(),minQuantity:y,maxFutureDay:D,startingStock:w}).then((function(){console.log("Document successfully written!"),M(!0),setTimeout((function(){M(!1),e.closeOrder()}),1e3)}))}catch(r){console.log(r),console.log("Failed to get user data")}g(!1);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return n.a.createElement("div",null,n.a.createElement(Y.a,{open:I,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},n.a.createElement(G.a,{severity:"success"},n.a.createElement(Je.a,null,"Success"),n.a.createElement("strong",null,"Settings Updated"))),n.a.createElement($.a,null,n.a.createElement(A.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(V.a,{maxWidth:"sm"},n.a.createElement(A.a,{mb:3},n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},"Update settings")),n.a.createElement("form",{className:a.root,noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"Fuel Price",margin:"normal",name:"fuelPrice",variant:"outlined",required:!0,defaultValue:o,onChange:function(e){return F(e.target.name,e.target.value)}}),m&&m.fuelPrice&&n.a.createElement(G.a,{severity:"error"},m.fuelPrice.message),w&&n.a.createElement(Q.a,{fullWidth:!0,label:"Starting Stock",margin:"normal",name:"startingStock",variant:"outlined",required:!0,defaultValue:w,onChange:function(e){return F(e.target.name,e.target.value)}}),m&&m.startingStock&&n.a.createElement(G.a,{severity:"error"},m.startingStock.message),y&&n.a.createElement(Q.a,{fullWidth:!0,label:"Minimum Quantity",margin:"normal",name:"minQuantity",variant:"outlined",required:!0,type:"number",defaultValue:y,onChange:function(e){return F(e.target.name,e.target.value)}}),m&&m.minQuantity&&n.a.createElement(G.a,{severity:"error"},m.minQuantity.message),n.a.createElement("div",null,n.a.createElement(Q.a,{fullWidth:!0,label:"Vehicle number",margin:"normal",name:"vehicleNumber",variant:"outlined",required:!0,disabled:!0}),n.a.createElement(Q.a,{fullWidth:!0,label:"Driver name",margin:"normal",name:"driverName",variant:"outlined",required:!0,disabled:!0}),D&&n.a.createElement(Q.a,{fullWidth:!0,label:"Advanced booking limit(days)",margin:"normal",name:"maxFutureDay",variant:"outlined",required:!0,defaultValue:D,onChange:function(e){return F(e.target.name,e.target.value)}}),m&&m.maxFutureDay&&n.a.createElement(G.a,{severity:"error"},m.maxFutureDay.message)))))),n.a.createElement(J.a,null,n.a.createElement(U.a,{disabled:b,onClick:function(e){return q.apply(this,arguments)},color:"primary"},"Update Settings"),n.a.createElement(U.a,{onClick:e.closeOrder,color:"primary"},"Close")))}var Gt=Object(f.a)();Gt.typography.h3=Object(Tt.a)({fontSize:"0.7rem","@media (min-width:600px)":{fontSize:"1.2rem"}},Gt.breakpoints.up("md"),{fontSize:"2rem"});var Ht=Object(u.a)((function(){return{root:{},avatar:{width:60,height:60}}})),Yt=function(e){var t=e.className,a=(e.onMobileNavOpen,e.userData),l=e.price,c=Object(S.a)(e,["className","onMobileNavOpen","userData","price"]),u=Ht(),s=Object(r.useState)([]),m=Object(E.a)(s,1)[0],d=C().logout,p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(!1),v=Object(E.a)(h,2),y=(v[0],v[1],C().currentUser,Object(r.useState)(!1)),O=Object(E.a)(y,2),j=O[0],x=O[1],w=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&x(e)}},P=function(){g(!1)};function W(){return(W=Object(R.a)(z.a.mark((function e(t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d();case 4:Object(o.navigate)("/login",!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Failed to log out");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,n.a.createElement(k.a,Object.assign({className:Object(N.a)(u.root,t),elevation:0},c),n.a.createElement(D.a,null,n.a.createElement(T,null),n.a.createElement(A.a,{flexGrow:1}),n.a.createElement(i.a,{theme:Gt},n.a.createElement(L.a,{style:{color:"white"},variant:"h3"},"SHAKTHI GANAPATHI FUEL STATION")),n.a.createElement(A.a,{flexGrow:1}),a&&a.isOwner&&n.a.createElement(Ye.a,{color:"inherit"},n.a.createElement(Wt.a,{badgeContent:m.length,color:"primary",variant:"dot"},n.a.createElement(Mt.a,{onClick:w(!0)}))),n.a.createElement(Ye.a,{color:"inherit"},n.a.createElement(Wt.a,{badgeContent:m.length,color:"primary",variant:"dot"},n.a.createElement(qt.a,{onClick:function(){g(!0)}}))),n.a.createElement(Ye.a,{color:"inherit"},n.a.createElement(Rt.a,{onClick:function(e){return W.apply(this,arguments)}})))),n.a.createElement("div",null,b&&n.a.createElement(Y.a,{open:b,onClose:P,"aria-labelledby":"form-dialog-title",fullWidth:!0,maxWidth:"sm"},n.a.createElement(Ut,{userData:a,closeOrder:P}))),n.a.createElement("div",null,n.a.createElement(ft.a,{anchor:"right",open:j,onClose:w(!1)},n.a.createElement(Bt,{userData:a,price:l,closeOrder:w(!1)})))))},Xt=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,display:"flex",height:"100%",overflow:"hidden",width:"100%"},wrapper:{display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},contentContainer:{display:"flex",flex:"1 1 auto",overflow:"hidden"},content:{flex:"1 1 auto",height:"100%",overflow:"auto"},footer:{padding:e.spacing(1.5,1),marginTop:"auto",backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[800],bottom:0,position:"sticky"}}})),Jt=function(e){var t=e.children,a=Xt(),l=C().currentUser,c=Object(r.useState)(!1),o=Object(E.a)(c,2),i=(o[0],o[1]),u=Object(r.useState)(),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(92),f=Object(E.a)(p,2),b=f[0],g=f[1],h=j.collection("priceForTheDay").doc("e8kgvrn1XGzqM4JYAG3X");return Object(r.useEffect)((function(){try{j.collection("users").doc(l.uid).onSnapshot((function(e){return d(e.data())}))}catch(e){console.log(e),console.log("Failed to Update user data")}return h.onSnapshot((function(e){e&&e.data()&&g(e.data().price)}))}),[]),n.a.createElement("div",{className:a.root},n.a.createElement(Yt,{onMobileNavOpen:function(){return i(!0)},userData:m,updateUserData:d,price:b,setPrice:g}),m&&void 0!==m.isOwner&&n.a.createElement("p",null,"HI"),n.a.createElement("div",{className:a.wrapper},n.a.createElement("div",{className:a.contentContainer},n.a.createElement("div",{className:a.content},t,n.a.createElement("footer",{className:a.footer},n.a.createElement(V.a,null,n.a.createElement(B.a,{container:!0,justify:"center",className:a.pos},n.a.createElement(B.a,{item:!0},n.a.createElement(L.a,{style:{color:"black"},variant:"caption"},"Phone : 9008761088 | Email : r6mesh@gmail.com | Toll Free No : 1800 2333 555")))))))))},$t=Object(u.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,height:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}})),_t=function(){var e=$t(),t=C().signup,a=(C().currentUser,Object(r.useState)("")),l=Object(E.a)(a,2),c=l[0],i=l[1],u=Object(r.useState)(!1),s=Object(E.a)(u,2),m=s[0],d=s[1],p=Object(r.useState)(!1),f=Object(E.a)(p,2),b=f[0],g=f[1],h=Object(r.useState)(!1),v=Object(E.a)(h,2),y=v[0],O=v[1],x=Object(r.useState)(!1),w=Object(E.a)(x,2),S=w[0],N=w[1],k=Object(r.useState)(!1),D=Object(E.a)(k,2),P=D[0],T=D[1],W=Object(r.useState)(!1),I=Object(E.a)(W,2),M=I[0],F=I[1],q=Object(r.useState)(!1),B=Object(E.a)(q,2),H=B[0],Y=B[1];function X(){return(X=Object(R.a)(z.a.mark((function e(a){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),P===M){e.next=3;break}return e.abrupt("return",i("Passwords do not match"));case 3:if(!H||"undefined"===typeof H){e.next=11;break}if(new RegExp(/^[0-9\b]+$/).test(H)){e.next=9;break}return e.abrupt("return",i("Please enter only number"));case 9:if(10===H.length){e.next=11;break}return e.abrupt("return",i("Please enter valid phone number"));case 11:return e.prev=11,i(""),d(!0),e.next=16,t(S,P).then((function(e){return e.user.updateProfile({displayName:"".concat(b," ").concat(y)}).then((function(){console.log("Name Updated")})),j.collection("users").doc(e.user.uid).set({isCustomer:!0,mobileNumber:H,displayName:"".concat(b," ").concat(y),email:S})}));case 16:Object(o.navigate)("/app/dashboard",{replace:!0}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(11),i("Failed to create an account");case 22:d(!1);case 23:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}return n.a.createElement(Z,{className:e.root,title:"Register"},n.a.createElement(A.a,{display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},n.a.createElement(V.a,{maxWidth:"sm"},n.a.createElement(A.a,{mb:3},n.a.createElement(L.a,{color:"textPrimary",variant:"h2"},"Create new account"),n.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0,variant:"body2"},"Use your email to create new account")),c&&n.a.createElement(G.a,{severity:"error"},c),n.a.createElement("form",{className:"form",noValidate:!0},n.a.createElement(Q.a,{fullWidth:!0,label:"First Name",margin:"normal",name:"firstName",variant:"outlined",onChange:function(e){return g(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Last Name",margin:"normal",name:"LastName",variant:"outlined",onChange:function(e){return O(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Mobile number",margin:"normal",name:"mobileNumber",variant:"outlined",required:!0,onChange:function(e){return Y(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Email",margin:"normal",name:"email",type:"email",variant:"outlined",required:!0,onChange:function(e){return N(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Password",margin:"normal",name:"password",type:"password",variant:"outlined",required:!0,onChange:function(e){return T(e.target.value)}}),n.a.createElement(Q.a,{fullWidth:!0,label:"Confirm Password",margin:"normal",name:"confirmPassword",type:"password",variant:"outlined",required:!0,onChange:function(e){return F(e.target.value)}}),n.a.createElement(A.a,{my:2},n.a.createElement(U.a,{color:"primary",disabled:m,fullWidth:!0,size:"large",type:"submit",variant:"contained",onClick:function(e){return X.apply(this,arguments)}},"Sign up now"))),n.a.createElement(L.a,{color:"textSecondary",variant:"body1"},"Have an account?"," ",n.a.createElement(o.A,{href:"/login",variant:"h6"},"Sign in")))))},Kt=function(){var e={"/":function(){return n.a.createElement(F,null,n.a.createElement(te,null))},"/login":function(){return n.a.createElement(F,null,n.a.createElement(te,null))},"/app/dashboard":function(){return n.a.createElement(Jt,null,n.a.createElement(st,null))},"/register":function(){return n.a.createElement(F,null,n.a.createElement(_t,null))}},t=Object(o.useRoutes)(e);return n.a.createElement(w,null,n.a.createElement(i.a,{theme:g},n.a.createElement(d,null),t||n.a.createElement("h1",null,"Invalid routing")))};a(605),a(606);c.a.render(n.a.createElement(Kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[442,1,2]]]);
//# sourceMappingURL=main.dfd5046c.chunk.js.map